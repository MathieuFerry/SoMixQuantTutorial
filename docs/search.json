[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Formation R",
    "section": "",
    "text": "Preface\nThis short guide summarizes the learning elements proposed for the SoMix training in December 2025 in Colombo (Sri Lanka).\nThe various tutorials aim to familiarize participants with the RStudio console, the R language (and the tidyverse) through a selection of functions and tools considered most relevant for handling statistical data in the social sciences.\nThis guide is a training support for R; it is not a full course in statistics. It is also not intended to replace the many excellent guides available on the internet, for example:\n\nR for data science",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "1.1 Install R and RStudio\nWe will start by installing R according to your computer’s configuration, using the links available on the Comprenhensive R Archive Network (CRAN).\nWe will then install RStudio by going to this page. RStudio is an “Integrated Development Environment (IDE)”, meaning software that provides a user-friendly interface for working with the R programming language. Note that it is possible to use other interface software, but RStudio is probably the most widely used today.\nIf, for one reason or another, it is not possible to install R / RStudio on your computer, you can temporarily (because we do not recommend using a private server to store sensitive data) use R / RStudio online by creating an account on the “Posit cloud”.\nOnce R and RStudio are installed, you can directly open RStudio, which will display a nice console (except that here, I have already created an R script by clicking on the small white arrow on a green background and saved it under the name 1Intro.R, which you should also do).",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#install-r-and-rstudio",
    "href": "intro.html#install-r-and-rstudio",
    "title": "1  Introduction",
    "section": "",
    "text": "Exercise\n\n\n\n\nOpen RStudio and create an empty script.\nSave this script in a folder (for example, “Formation R”), naming it for instance 1Intro.R.",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#r-rstudio-and-the-tidyverse",
    "href": "intro.html#r-rstudio-and-the-tidyverse",
    "title": "1  Introduction",
    "section": "1.2 R, RStudio and the tidyverse",
    "text": "1.2 R, RStudio and the tidyverse\nYou can refer to the following small presentation of the tidyverse. Let us recall here that R is a programming language developed since the 1990s, derived from the S language, and sharing some similarities with the C language. It is open-source and free of charge.\nAmong the many strengths of R, one can note in particular its community of users, who can also take on the role of developers. R therefore has numerous extensions in the form of functions, stored in packages (or libraries), which greatly facilitate its use. The list of packages available on CRAN (although it is also possible to use packages that are not on CRAN) is available here: https://cran.r-project.org/web/packages/.\nWith more than 22,000 packages, it’s easy to get lost. Throughout this guide, we suggest using a few packages considered helpful for making life easier when doing statistics in the social sciences. Again, the goal is not to be exhaustive, nor to impose anything. One particularity of R is that it is often possible to do the same thing using different operations / functions / packages. Everyone eventually finds their own little “tricks”!\nThe tidyverse package actually includes a suite of packages designed to work together, making data manipulation, recoding, and the production of graphics easier compared to “base R”. We will rely on it here for our statistical work.\n\n\n\n\n\n\nExercise\n\n\n\nInstall the tidyverse package, then load it into the R session using the two lines of code below. You can copy-paste them into your script and run them (see the next section if you don’t know how to run lines of code).\n\n\n\ninstall.packages(\"tidyverse\")\nlibrary(tidyverse)\n\n\n\n\n\n\n\nNote\n\n\n\nYou only need to install packages once; however, you must load the package each time you open a new R session. So, if you close RStudio and then reopen it, there is no need to run install.packages(\"tidyverse\") again — but to use the functions from this package, you still need to call tidyverse by running library(tidyverse).\nCalling the relevant packages is generally done systematically at the beginning of the script.",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#rstudio-as-a-working-tool",
    "href": "intro.html#rstudio-as-a-working-tool",
    "title": "1  Introduction",
    "section": "1.3 RStudio as a working tool",
    "text": "1.3 RStudio as a working tool\nBy default, the console is displayed in the form of four panels:\n\nThe first panel in the top left corresponds to the R script file, which for now is empty (or almost empty, if you have already copy-pasted the lines of code to install and load tidyverse). This is where we will write the command lines that we will run, either by clicking Run, or by using the keyboard shortcut Cmd + Enter (or Control + Enter).\nThe second panel in the bottom left corresponds to the console. For now, it simply tells us that it has loaded R in the most up-to-date version found on my computer (4.4.3). The console will display the commands that we have run and the messages returned by R when executing them.\nThe third panel in the top right contains several tabs. The most important one is the Environment tab, which shows all the objects created in the current session (data frames, lists, vectors, etc.).\nThe fourth panel in the bottom right also contains several tabs, including Files — which allows you to browse your computer’s directory structure — Plots, where our beautiful graphs will be displayed, Packages, which lists the packages (libraries) installed on our computer and indicates which ones are loaded in the current session (they are checked), Help, which displays information about a function when you type ?function_name in the console, and Viewer, where our nice tables will appear.\n\n\n\n\n\n\n\nExercise\n\n\n\nCheck that the tidyverse package is correctly installed and loaded in the R session.\n\n\n\n\n\nThe RStudio console\n\n\n\n\n\n\n\n\nCaution\n\n\n\n\nWhen quitting RStudio, a window may appear asking whether you want to “Save the workspace image…”. And in fact, it is not a good idea to click Save!\nBecause this saves the entire workspace (the session), which will be automatically reopened when restarting RStudio, and you may end up with objects that are no longer relevant for a later session (and that may even conflict with one another).\nIf you did not click Save, reopening RStudio resets the R session. To make sure this is really the case (clear the global environment, unload packages, reset memory, etc.), you can type the following in the console:\n\n\n.rs.restartR()",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#loading-data-into-r",
    "href": "intro.html#loading-data-into-r",
    "title": "1  Introduction",
    "section": "1.4 Loading data into R",
    "text": "1.4 Loading data into R\nTo do statistics, we need data. Here, we are going to use excerpts of the Household Income and Expenditure Survey 2019 collected by the Sri Lankan Department of Census and Statistics. For legality matters, you will need to create an account on the Lanka data platform and download the microdata files from the online platform. Notice that you are able to download only 25% of the total survey sample.\nFor this workshop, we have additionally prepared three files to make your life easier to manipulate the survey, which you can access here Data repository. You will need to provide a password (request password by email!). Download the files from this online folder. The folder contains a PDF of the questionnaire and a zipped folder which you can unzip on your computer. In the zipped folder, you will find three “.rds” files (R statistical files): - edu.rds contains data from Section 2 of the survey, i.e. on school education for household members aged 5 to 19 - health.rds contains data from Section 3A of the survey, i.e. on health treatment and chronic illness - environment.rds contains data from Section 7 & 8, i.e. on access to primary facilities and housing information\nNotice that the unit of analysis differs in the three different files. For edu.rds, the unit of analysis (a “row” in the data file) are all household individuals aged 5 to 19 (N=4,552). For health.rds and environment.rds, the\nIn addition the variables (the different “columns” of the files) of these sections, we have already added a number of socio-demographic variables in each of these files to ease statistical manipulations, including: - hhid: a unique household identifier - indid: a unique individual identifier (only in edu.rds) - edu_attained: this is a recoded version of individual educational attainment - edu_father: father’s educational attainment (only in edu.rds) - edu_mother: mother’s educational attainment (only in edu.rds) - edu_parent: combined parents’ educational attainment, i.e. maximum educational attainment between both parents (only in edu.rds) - age: individual’s age (only in edu.rds) - birth_year: individual’s age (only in edu.rds) - sex: individual’s sex (only in edu.rds) - age_father: father’s age (only in edu.rds) - age_mother: mother’s age (only in edu.rds) - province: province of residence - ethnicity: household head’s ethnicity - religion: household head’s religion - hhwealth: a continuous variable to proxy households’ material well-being (an index based on durable goods ownership) - hhwealthcat: a categorical variable to proxy households’ material well-being (an index based on durable goods ownership) - finalweight_25per: a “survey weight” variable to use in all statistical treatments to get correct estimates!\nLet’s load edu.rds into RStudio. Generally, there are three options to import data into R: - In the bottom-right panel, you can browse your folder structure to find the appropriate file, and click on it. - You can click Import Dataset in the top-right panel, then click Browse and navigate through Finder or File Explorer. - You can directly use lines of code written in your script to load your file.\nThe third solution is preferable, in the interest of making your code reproducible. But the first or the second have the advantage of being easier when you are not familiar with coding, especially since these “point-and-click” solutions also provide the corresponding lines of code, which you can copy into your script for your next working session!\n\n\n\n\n\n\nExercise\n\n\n\nLoad edu.rds using the first solution. Then, use the code below to directly use the second solution. Note that the line setwd(\"/home/groups/3genquanti/SoMix/HIES for workshop\") indicates where you have stored your files locally on your computer. You can retrieve the file path of your files in Finder or File Explorer by right-clicking on the data file, then selecting Properties or Get Info.\n\n\n\nsetwd(\"/home/groups/3genquanti/SoMix/HIES for workshop\")\nedu&lt;-readRDS(\"edu.rds\")",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#describing-your-dataset",
    "href": "intro.html#describing-your-dataset",
    "title": "1  Introduction",
    "section": "1.5 Describing your dataset",
    "text": "1.5 Describing your dataset\nIf everything worked properly, the dataset should now appear in the Environment (top-right tab).\nTo see the data file (you can also click on it):\n\nView(edu)\n\nSeveral ways of better describing your dataset can be useful:\n\nYou can type the name of the dataset edu in the console, which will display the dataset (not recommended!).\nYou can also type str(edu) to understand the structure of the dataset.\nYou can also type summary(edu) to obtain a summary of the quantitative variables in the dataset.",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#a-few-functions-to-manipulate-data",
    "href": "intro.html#a-few-functions-to-manipulate-data",
    "title": "1  Introduction",
    "section": "1.6 A few functions to manipulate data",
    "text": "1.6 A few functions to manipulate data\n\n1.6.1 Accessing a variable\nThe dataset is therefore composed of 38 variables. To access a variable — for example the variable age — you can type:\n\nedu$age\n\nThe $ sign indicates that we are accessing the variable age contained in the edu dataset. This command returns a vector of the values of the variable.\nIn the tidyverse, we call objects using pipes, which come in two different (and largely equivalent) operators: %&gt;% and |&gt;. We will aim to favor the second one (but they are largely interchangeable!).\nFor example, to calculate the mean of age, we would write:\n\nedu |&gt; summarise(mean(age))\n\nsummarise is the function that allows you to summarise the dataset according to the function specified. Note that we could also have written:\n\nedu |&gt; summarise(Mean_age=mean(age))\nedu |&gt; summarise(`Mean age`=mean(age))\n\n\n\n1.6.2 Transforming a variable\nLet’s assume the database does not include age but only birth_year. In that case, we could re-create age by creating a variable based on birth_year. Here, we use mutate to create/transform variables.\n\nedu &lt;- edu |&gt; mutate(age_created=2019-birth_year)\n\n\n\n1.6.3 Selecting columns\nTo create a database called edu2 where we select only certain variables, we write:\n\nedu2&lt;- edu %&gt;% select(hhid,age,sex,edu_attained)\n\nselect allows to select columns of the dataframe.\nSimilarly, select can be used to remove columns:\n\nedu3 &lt;- edu2 |&gt; select(-c(edu_attained,sex))\n\n\n\n1.6.4 Selecting rows\nTo create a database from edu where we decide to study only male respondents:\n\nedum &lt;- edu |&gt; filter(sex==\"Male\")\n\nfilter allows you to select the rows of the dataset that satisfy a given condition. The ampersand operator & means “and”. If you want to use the logical “or” operator, you write: |.\nLet’s say we want to study only female respondents with less than primary attainment:\n\nedufl&lt;- edu |&gt; filter(sex==\"Female\" & edu_attainment==\"Less than primary\")\n\n\n\n1.6.5 Renaming a variable\nLet’s rename a variable in edufl:\n\nedufl &lt;- edufl |&gt; rename(ethnic_category=ethnicity)\n\nThe variable ethnicity has been renamed as ethnic_category.",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#saving-data",
    "href": "intro.html#saving-data",
    "title": "1  Introduction",
    "section": "1.7 Saving data",
    "text": "1.7 Saving data\nTo save databases from R (because you have done some data management and want to save your file), there are several solutions.\n\n1.7.1 Native R formats\n\nYou can save your data in .RData format. This is the simplest option — no hassle — and the advantage is that you are sure to preserve the format of the variables, the labels (we will come back to this later), etc.\n\n\nsave(edufl,file=\"edufl.RData\")\n\nBefore using this function, we should not forget to run setwd(\"path to the folder where the file will be saved\") to indicate where to save the file (or at least to check that R is indeed pointing to the desired folder using the getwd() command).\nNote that the RData format can perfectly well be used to save several R objects in the same file:\n\nsave(edufl,edum,file=\"eduv2.RData\")\n\nTo reopen an .RData file, you simply need to write:\n\nload(\"eduv2.RData\")\n\nThe drawback of the .RData format is that, since there may be several objects in the file, we do not know what they are called and we cannot directly assign a default object name when opening it in the R console. This can sometimes be risky (imagine that we have a file eduv2.RData that contains edufl and edum, but that we already have an object called edum in our environment that is actually different — when opening eduv2.RData, the existing object would be overwritten).\nFor this reason, datasets can be saved individually using the .rds format with specific functions (this is how you have been provided with the workshop data):\n\nsaveRDS(edum, \"edum.rds\")\n\nWhen opening an .rds file, you explicitly control the name that will be assigned to it in the R environment (which in this case does not necessarily need to be edum):\n\nedum2 &lt;- readRDS(\"edum.rds\")\n\n\n\n1.7.2 CSV format\n\nWe sometimes need to export our data in CSV format. In that case, we use functions from the readr package, such as write_csv (which uses commas as column separators and periods as decimal markers).\n\nThe CSV format with comma separators is the international standard for CSV files, and it is easily formatted when Excel on one’s computer is configured in English:\n\nwrite_csv(edu, \"edu.csv\")\n\n\n\n1.7.3 Other formats\n\nIf you want to save your file directly as an Excel file, this is also possible. At least two packages allow this: writexl and openxlsx. If we install openxlsx (install.packages(\"openxlsx\")):\n\n\nlibrary(openxlsx)\nwrite.xlsx(edu, \"edu.xlsx\")\n\nIf you want to read an Excel file, you can use read.xlsx from the same package. Here, the argument sheet = NULL indicates that we are reading all the sheets of the Excel file if there are several:\n\nread.xlsx(\"Salaires.xlsx\", sheet = NULL)\n\n\nSometimes we work with colleagues who use other proprietary paid software (what an idea!). In that case, we can use the haven package, which allows us to save data in SAS, SPSS or Stata format:\n\n\nlibrary(haven)\nwrite_dta(edu, \"edu.dta\")\nwrite_sas(edu, \"edu.sas7bdat\")\nwrite_sav(edu, \"edu.sav\")\n\nBe careful: with the SAS format, the conversion of value labels is not as straightforward as with other software.",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#exercise",
    "href": "intro.html#exercise",
    "title": "1  Introduction",
    "section": "1.8 Exercise",
    "text": "1.8 Exercise\n\n\n\n\n\n\nExercise\n\n\n\nSave as an .rds file a dataset created from edu with the following conditions:\n-   It contains only the columns hhid, edu_attained, age, and sex.\n\n-   It contains only individuals who, at the time of the survey, are not in school (r2_school_education %in% c(2, 3)).",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "statunis.html",
    "href": "statunis.html",
    "title": "2  Survey data and univariate statistics",
    "section": "",
    "text": "2.1 Working with survey data\nThe Household Income and Expenditure Survey (HIES) data correspond to a sample of households in Sri Lanka. This sample, thanks to the household selection procedures included in the survey, is representative of the entire population of Sri Lanka.\nKeep in mind that the selection is based on a complete enumeration of households and a random selection of households included in the sample (in fact, it’s a little more complex, but that’s the general idea).\nWhy use a sample instead of surveying the entire population?\nIf the survey were exhaustive, it would be a census, which the DCS conducts separately. Sampling allows the collection of high-quality, representative data at lower cost and in less time, and all public and private statistical institutes use this type of survey method.\nGenerally, sample data include a weight variable. These weights ensure the representativeness of the sample for the entire population (to put it simply, in the most common case, the weights correct biases in data collection because not all selected respondents were actually surveyed, and the weight corrects for these biases).\nThese types of data are very common in the social sciences (and the DCS conducts several sample-based surveys, such as the Time Use Survey, the Labor Force Survey, etc.), so it is important to know how to handle them.\nThus, all statistical operations performed on HIES files must take this weighting into account. For example, in the previous chapter we calculated the average age of respondents to the education module. Since we did not use a weight variable, we simply calculated the mean among the respondents. If we had taken weighting into account, we would have inferred the average age of children between 5 and 19 years old for the entire population.\nIn our HIES files, the correct weight variable is finalweight_25per (this is a specific weight variable to this sample because we are working with a 25% random sample of the survey sample, which is itself a random sample of the entire population).",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey data and univariate statistics</span>"
    ]
  },
  {
    "objectID": "statunis.html#describing-a-numerical-variable",
    "href": "statunis.html#describing-a-numerical-variable",
    "title": "2  Survey data and univariate statistics",
    "section": "2.2 Describing a numerical variable",
    "text": "2.2 Describing a numerical variable\n\n2.2.1 Summarise variables based on a few statistics\nIn R, we can easily summarize a numerical variable using a few statistical indicators:\n\nMinimum\nMean\nMedian\nMaximum\n\nThe minimum and maximum give an idea of the range of values taken by the variable, while the mean and median are measures of central tendency.\nIt is often useful to estimate the median in addition to the mean when studying a numerical variable. Indeed, the mean is sensitive to “extreme” values in a distribution.\nThe median is the value that separates the lower half from the upper half of a statistical distribution (50% of the population has a lower value, 50% has a higher value). When the mean and median differ greatly, it indicates that the distribution of the variable’s values is not evenly spread around the mean.\nTypically, when studying income, the mean is often much higher than the median, because a few individuals have very high incomes, which tends to increase the mean, while the median is a more stable measure of central tendency.\nTo obtain these statistics for the variable distance which indicates the distance from home to school for children:\n\nedu |&gt;\n  summarise(\n    min    = min(distance, na.rm = TRUE),\n    mean   = wtd.mean(distance,weights=finalweight_25per,na.rm = TRUE),\n    median = wtd.quantile(distance,probs=.5,weights=finalweight_25per,na.rm = TRUE),\n    max    = max(distance, na.rm = TRUE),\n    n_na   = sum(is.na(distance))\n  )\n\nNotice that we use finalweight_25per to calculate the mean and the median, but not to calculate the minimum and maximum. Here, the minimum and maximum age suggest that some children live very close to their school, but for at least one child, the school is pretty far from home!\nThe mean is higher than the median, indicating that a few unusually high distance values are stretching the upper tail of the distribution, resulting in a right-skewed distribution.\nWe also added the number of NA cases in this variables, i.e. the number of missing variables. In fact, here this corresponds to children who actually do not attend school.\nWe produced such a nice output that we would like to display it as a table, but copying and pasting from the console doesn’t look very nice…\nNo worries — there are plenty of packages in R to create beautiful table outputs. Here, we propose using kableExtra :\n\nsummary&lt;-edu |&gt;\n  summarise(\n    min    = min(distance, na.rm = TRUE),\n    mean   = wtd.mean(distance,weights=finalweight_25per,na.rm = TRUE),\n    median = wtd.quantile(distance,probs=.5,weights=finalweight_25per,na.rm = TRUE),\n    max    = max(distance, na.rm = TRUE),\n    n_na   = sum(is.na(distance))\n  )\nsummary |&gt; kbl() |&gt; kable_classic(full_width = F)\n\n#Or to have a lower number of digits for the mean: \nsummary |&gt; kbl(digits=2) |&gt; kable_classic(full_width = F)\n\nThe function kbl transforms the summary object into a table in LaTeX/HTML format, which is displayed in the Viewer (bottom-right panel), and the function kable_classic is one of the default formatting options I chose.\nThese tables can be customized endlessly (including adding titles, captions, etc.). The main advantage is that they can be copied and pasted cleanly into your report, article, or thesis.\n\n\n\nTable created with kableExtra and displayed in the Viewer\n\n\n\n\n2.2.2 Summarizing a quantitative variable with a graph\nAll of this looks nice and seems to suggest that distance is a skewed variable with a distribution stretched to the right. Can we visualize the distribution?\nWe can use the esquisse package, which provides a point-and-click solution for creating plots. You need to run the following line (be a little patient while the page loads). This avoids having to write the code yourself to create the plot using the ggplot2 package.\n\nesquisser(edu)\n\nThis should load an interface with the different variables from the dataset at the top, which you will need to drag into the corresponding boxes.\n\n\n\nEsquisse interface\n\n\nBy dragging the distance variable into the X box, a histogram is created automatically. You can modify this representation, for example, by choosing a density plot instead. The entire graph is customizable using the options below.\nFinally, you can save your plot and also copy the code that generates the same plot without having to reopen Esquisse!",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey data and univariate statistics</span>"
    ]
  },
  {
    "objectID": "statunis.html#describing-a-categorical-variable",
    "href": "statunis.html#describing-a-categorical-variable",
    "title": "2  Survey data and univariate statistics",
    "section": "2.3 Describing a categorical variable",
    "text": "2.3 Describing a categorical variable\nDescribing a numerical variable is nice, but we often have quite a few categorical variables in our datasets. How can we describe them?\nThe function freqtable from the questionr package allows you to get the weighted counts of a categorical variable, and freq calculates the corresponding percentages (%val corresponds to the percentages of non-NA categories).\nNote that it is always possible to remove the part weights=finalweight_25per to get unweighted counts and\nHere, we are interested in the variable r2_school_education, which corresponds to the respondents’ school status.\n\n#|eval: false\n\nedu |&gt; freqtable(r2_school_education,weights=finalweight_25per) %&gt;% freq()\nedu |&gt; freqtable(r2_school_education) %&gt;% freq()\nedu |&gt; freqtable(r2_school_education,weights=finalweight_25per) %&gt;% freq() %&gt;% select(-n)",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey data and univariate statistics</span>"
    ]
  },
  {
    "objectID": "statunis.html#recoding-a-categorical-variable",
    "href": "statunis.html#recoding-a-categorical-variable",
    "title": "2  Survey data and univariate statistics",
    "section": "2.4 Recoding a categorical variable",
    "text": "2.4 Recoding a categorical variable\nNote that the categories of r2_school_education are here coded as 1, 2, and 3. This is because when getting the from the Lanka datta, we got CSV files without any data labels so we need to recode them ourselves based on the questionnaire of the survey.\nLuckily, this task can be done very easily by using the irec() interface (from the questionr package created by Julien Barnier). Type it in the console and the following window will open to recode a new variable with explicit levels (in the R lingo, these are factor levels).\n   The last panel shows you the R code to recode the variable. When clicking on Done, this code is sent to the Console. We strongly advise you to copy-paste this code into your script to keep track of all your recoding steps!\n\n\n\n\n\n\nExercise\n\n\n\nWith the newly recoded variable of school attendance, recompute the % distribution of this variable. Then, open Esquisse and draw a graph of this variable.",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey data and univariate statistics</span>"
    ]
  },
  {
    "objectID": "statunis.html#recoding-a-numerical-variable-to-a-categorical-variable",
    "href": "statunis.html#recoding-a-numerical-variable-to-a-categorical-variable",
    "title": "2  Survey data and univariate statistics",
    "section": "2.5 Recoding a numerical variable to a categorical variable",
    "text": "2.5 Recoding a numerical variable to a categorical variable\nIt can be useful to analyze distance to school not as a numerical variable but as a categorical variable (for example, what proportion of students have a school less than 1 km away?).\nRecoding a quantitative variable into a qualitative variable is straightforward. In R, we can use another add-in from the questionr package: icut:\n\nicut()\n\nYou can then choose the dataset in which you want to recode a variable, select the variable to recode, and specify the name of the recoded variable (by default, the old variable name with “_rec” added). This add-in relies on R’s cut() function.\nDifferent recoding options are offered:\n\nManually (if you have identified key values, or know key thresholds for a variable, for example a poverty level),\nUsing a reclassification algorithm (Jenks, which geographers often use, or other algorithms),\nUsing quantiles, or\nUsing equal-width intervals in the distribution.\n\nHere, we choose to recode the variable into quartiles. The newly created variable corresponds to 4 categories, each roughly representing 25% of the unweighted respondents. However, this division is not always exact, especially when many individuals share the same value — in this case, the number of kilometers.\n  \nYou can then click Done. Note that the variable has not yet been created, but in the console, the code to create it is provided. You just need to copy and paste it into your script and run it (you can also modify it directly yourself if you want):\n\n## Cutting edu$distance into edu$distance_rec\nedu$distance_rec &lt;- cut(edu$distance,\n  include.lowest = TRUE,\n  right = FALSE,\n  dig.lab = 4,\n  breaks = c(0, 1, 2, 4, 84)\n)\n\n\n\n\n\n\n\nExercise\n\n\n\nStudy the distribution of the newly created variable distance_rec.\nSave your dataset as a rds file with the name “edu_rec.rds”.",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey data and univariate statistics</span>"
    ]
  },
  {
    "objectID": "statbis.html",
    "href": "statbis.html",
    "title": "3  Statistiques bivariées et graphiques",
    "section": "",
    "text": "3.1 The association between a categorical variable and a numerical variable\nIn the chapter on univariate statistics, we discussed several indicators of the distribution of a numerical variable (minimum, maximum, mean, median). Thanks to the lines of code already set up, it is very easy to calculate these statistics for different categories of another categorical variable.\nYou simply need to add another function to compute these statistics for each category of a variable, namely group_by:\nedu |&gt;\n  group_by(province) |&gt;\n  summarise(\n    min    = min(distance, na.rm = TRUE),\n    mean   = wtd.mean(distance,weights=finalweight_25per,na.rm = TRUE),\n    median = wtd.quantile(distance,probs=.5,weights=finalweight_25per,na.rm = TRUE),\n    max    = max(distance, na.rm = TRUE),\n    n_na   = sum(is.na(distance))\n  )\nLet’s study the distance to school according to the place of residence: urban, rural, or estate. This corresponds to the variable sector, with categories 1, 2, and 3. We can recode these categories using the icut() interface, or directly with the following code:\nedu$sector_rec &lt;- edu$sector  |&gt;\n  as.character() |&gt;\n  fct_recode(\n    \"Urban\" = \"1\",\n    \"Rural\" = \"2\",\n    \"Estate\" = \"3\"\n  )\n\nedu |&gt;\n  group_by(sector_rec) |&gt;\n  summarise(\n    min    = min(distance, na.rm = TRUE),\n    mean   = wtd.mean(distance,weights=finalweight_25per,na.rm = TRUE),\n    median = wtd.quantile(distance,probs=.5,weights=finalweight_25per,na.rm = TRUE),\n    max    = max(distance, na.rm = TRUE),\n    n_na   = sum(is.na(distance))\n  )\nNothing prevents us from studying variations in the distance to school according to several categorical variables. For example, we can compute the mean and the median with respect to both the province and the place of residence:\nedu |&gt;\n  group_by(province,sector_rec) |&gt;\n  summarise(\n    mean   = wtd.mean(distance,weights=finalweight_25per,na.rm = TRUE),\n    median = wtd.quantile(distance,probs=.5,weights=finalweight_25per,na.rm = TRUE)\n  ) |&gt; \n  kbl(digits=1) |&gt; kable_classic(full_width = F)\nThe distance to school tends to be higher in rural areas, and this difference is mainly driven by extreme values. Indeed, it is primarily the mean, which is more sensitive to large values, that reflects this gap, more so than the median.\nedu |&gt;\n  group_by(province,sector_rec) |&gt;\n  summarise(\n    mean   = wtd.mean(distance,weights=finalweight_25per,na.rm = TRUE) \n  ) |&gt; \n  pivot_wider(names_from=sector_rec,values_from=mean) |&gt;\n  mutate(`Urban-Rural difference`=Urban-Rural) |&gt;\n  kbl(digits=1) |&gt; kable_classic(full_width = F)\nWe can clearly see from this last analysis that this pattern holds in all provinces (except North Western), but the gap varies: it is higher in the Sabaragamuwa and Southern provinces, where the distance to school for children in estate areas is particularly pronounced.",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Statistiques bivariées et graphiques</span>"
    ]
  },
  {
    "objectID": "statbis.html#the-association-between-a-categorical-variable-and-a-numerical-variable",
    "href": "statbis.html#the-association-between-a-categorical-variable-and-a-numerical-variable",
    "title": "3  Statistiques bivariées et graphiques",
    "section": "",
    "text": "Urban-rural gap in distance to school by province\n\n\n\n\n\n\n\nUrban-rural gap in distance to school by province\n\n\n\n\n3.1.1 Résumer par la moyenne et l’écart-type\nIt is quite common in academic articles to describe quantitative variables by reporting the mean (a measure of central tendency) and the standard deviation (a measure of dispersion, equal to the square root of the variance).\n\nedu |&gt;\n  group_by(sector_rec) |&gt;\n  summarise(\n    mean= mean(distance,na.rm=T),\n    sd= sd(distance,na.rm=T),\n  ) |&gt;\n  kbl(digits=1) |&gt; kable_classic(full_width = F)\n\n\n\n\nMean and standard deviation of distance to school by residence\n\n\nWhy are these two indicators used? First, we can say from this table that, on average, the distance to school is higher for children in rural areas than in urban areas. There is also greater variability in the distance to school in rural areas (sd stands for standard deviation).\n\n\n\n\n\n\nTip\n\n\n\nShould we summarize a variable by its mean or its median?\nThe first option is very common (especially in English-language journals) but is not necessarily the most appropriate…\nWhen working with skewed (i.e., non-normal) distributions:\n\nThe mean is sensitive to extreme values in the distribution.\nIt may be best to have a look at both and plot the distributions!\n\nNote: in fact, the standard deviation is then also not really a reliable indicator of dispersion describing the distribution. One may then prefer to calculate quantiles (e.g. quartiles, following Tukey’s 5 number summary!).\n\n\n\n\n\n\n\n\nExercise\n\n\n\nUsing esquisser, reproduce the following plot. Try to improve it by playing with color palettes, font sizes…\nWhat is your take away from this plot and from the previous statistics?\n\n\n\nDensity of the distance to school by residence location",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Statistiques bivariées et graphiques</span>"
    ]
  },
  {
    "objectID": "statbis.html#the-association-between-two-categorical-variables-and-the-cross-tabulation",
    "href": "statbis.html#the-association-between-two-categorical-variables-and-the-cross-tabulation",
    "title": "3  Statistiques bivariées et graphiques",
    "section": "3.2 The association between two categorical variables and the cross-tabulation",
    "text": "3.2 The association between two categorical variables and the cross-tabulation\n\n3.2.1 Some conventions for cross-tabulations\nWe now come to cross-tabulations to study the associations between two categorical variables.\nFirst, let’s recall a few analysis conventions. It’s easy to get confused when creating cross-tabulations, so keep the following points in mind:\n\nWhat is my response variable or dependent variable, i.e., the variable assumed to depend on another factor?\nWhat is my independent variable, i.e., the variable assumed to have an effect on the dependent variable?\n\nOn peut par exemple ici supposer que le fait d’être actuellement scolarisé (variable r2_school_education) dépend du niveau de diplôme des parents, mais aussi de leur niveau économique, du lieu de résidence, etc.\n\nTo visualize whether a factor affects a dependent variable, we can create a cross-tabulation in which:\nThe dependent variable is placed in the columns.\nThe independent variable is placed in the rows.\nRow percentages are calculated (we need to normalize the row counts to compare them!).\nWe then compare the rows within the same column.\n\nOf course, this is theory.\nThere are many cases where we might be more interested in column percentages, or even total percentages, or we may want to swap rows and columns. Nevertheless, keeping these simple conventions in mind helps to stay oriented when navigating statistical analyses.\n\n\n3.2.2 Practical application of the cross-tabulation\nNous retrouvons les fonctions du package questionr. Pour créer un tableau croisé des effectifs non pondérés, on pourra écrire :\n\nedu$r2_school_education_rec &lt;- edu$r2_school_education  |&gt;\n  as.character() |&gt;\n  fct_recode(\n    \"Currently attending\" = \"1\",\n    \"Never attended\" = \"2\",\n    \"Attended school in the past\" = \"3\"\n  )\n\nedu |&gt; freqtable(edu_parents,r2_school_education_rec)\n\nLa variable en ligne (ici, race) est la variable indépendante, c’est la première à être écrire, tandis que la variable en colonne (ici, salaire_quint) est la variable dépendante.\nPour obtenir des pourcentages en ligne, il suffit d’écrire :\n\nSalaires |&gt; freqtable(race,salaire_quint) |&gt; rprop()\n\nDans ce tableau, on peut aussi ajouter les effectifs totaux des lignes et par exemple ne pas mettre de décimales après la virgule :\n\nSalaires |&gt; freqtable(race,salaire_quint) |&gt; rprop(n=T,digit=0)\n\nBien sur, il est possible de réaliser un tableau des pourcentages en colonne :\n\nSalaires |&gt; freqtable(race,salaire_quint) |&gt; cprop(n=T,digit=0)\n\nOu des pourcentages totaux (qu’on appelle aussi pourcentages conjoints) :\n\nSalaires |&gt; freqtable(race,salaire_quint) |&gt; prop(n=T,digit=0)\n\n\n\n\n\n\n\nExercice\n\n\n\n\nÉtudier le lien entre le sexe et le niveau de salaire.\nRéaliser un tableau dans le Viewer.\n\n\n\n\n\n3.2.3 Le tableau et son graphique\nON GARDE\nOn peut aussi réaliser un diagramme à barres empilées ou adjacentes de l’association entre la catégorie raciale et le niveau de salaire :\n\n\n\nGraphique à barres avec Esquisse\n\n\nON ENLEVE\nOn pourrait améliorer ce graphique de deux manières :\n\nEn inversant l’ordre des étiquettes empilées (Très élevé en haut, très faible en bas)\nEn mettant l’axe des Y en pourcentages (attention, il faut avoir installer le package scales)\n\n\nggplot(Salaires) +\n  aes(x = race, fill = fct_rev(salaire_quint)) +  # Inverser l'ordre d'empilement\n  geom_bar(position = \"fill\") +\n  scale_y_continuous(labels = scales::percent_format()) + # Axe des Y en % avec package scales\n  scale_fill_brewer(palette = \"PuRd\", direction = -1,\n                    guide = guide_legend(reverse = TRUE)) +  # Légende dans le bon ordre\n  labs(\n    x = \"Catégorie raciale\",\n    y = \"Pourcentage\",\n    fill = \"Quintile de salaire\"\n  ) +\n  theme_light() +\n  theme(\n    legend.position = \"bottom\",\n    axis.title.y = element_text(size = 18L),\n    axis.title.x = element_text(size = 18L),\n    axis.text.y = element_text(size = 18L),\n    axis.text.x = element_text(size = 18L),\n    legend.text = element_text(size = 18L),\n    legend.title = element_text(size = 18L)\n  )\n\n\n\n\nGraphique à barres empilées amélioré\n\n\n\n\n\n\n\n\nBonus 1\n\n\n\n\n\nOn peut vouloir plutôt réaliser un diagramme à barres adjacentes plutôt que empilées. Dans ce cas, il est plus simple de repartir du tableau des pourcentages en ligne :\n\n#On crée le tableau croisé avec % en ligne\ntab &lt;- Salaires |&gt;\n  freqtable(race, salaire_quint) |&gt;\n  rprop(total=F) #On enlève les % totaux\n\n# Il faut transformer ce tableau en format tidy pour le graphique\ndf_tab &lt;- as.data.frame.matrix(tab) |&gt; #transformation en une matrice de format data.frame\n  rownames_to_column(\"race\") |&gt; #Les lignes étaient des \"row.names\" auxquelles on assigne un nom de colonne\n  pivot_longer(\n    cols = -race,\n    names_to = \"salaire_quint\",\n    values_to = \"pct\"\n  ) #On transforme le tableau de telle sorte que tous les % soient dans la même colonne et les modalités de salaire également. \ndf_tab$salaire_quint &lt;- df_tab$salaire_quint |&gt;\n  fct_relevel(\n    \"Très faible\",\"Faible\",\"Moyen\",\"Elevé\",\"Très élevé\"\n  )\n\nggplot(df_tab, aes(x = salaire_quint, y = pct / 100, fill = race)) +\n  geom_bar(stat = \"identity\",position = position_dodge2(width = 0.9,preserve=\"single\"))+\n  geom_text(aes(label = paste0(round(pct,0), \"%\")),\n             position = position_dodge2(width = 0.9,preserve=\"single\"),\n             vjust=-.3,\n             size = 5) +\n  scale_y_continuous(lim=c(0,.45),labels = scales::percent_format(accuracy = 1)) +\n  scale_fill_brewer(palette = \"Dark2\", direction = -1,\n                    guide = guide_legend(reverse = T)) +\n  labs(\n    x = \"Quintile de salaire\",\n    y = \"Pourcentage\",\n    fill = \"Catégorie raciale\"\n  ) +\n  theme_light() +\n  theme(\n    legend.position = \"bottom\",\n    axis.title.y = element_text(size = 18L),\n    axis.title.x = element_text(size = 18L),\n    axis.text.y = element_text(size = 18L),\n    axis.text.x = element_text(size = 18L),\n    legend.text = element_text(size = 18L),\n    legend.title = element_text(size = 18L)\n  )\n\n\n\n\nDiagramme à barres adjacentes\n\n\n\n\n\n\n\n\n\n\n\nBonus 2\n\n\n\n\n\nOn pourrait aussi vouloir créer un diagramme à barres avec les étiquettes de valeurs de pourcentage sur le graphique. Dans ce cas, il est plus simple de repartir du tableau des pourcentages en ligne :\n\n#On crée le tableau croisé avec % en ligne\ntab &lt;- Salaires |&gt;\n  freqtable(race, salaire_quint) |&gt;\n  rprop()\n\n# Il faut transformer ce tableau en format tidy pour le graphique\ndf_tab &lt;- as.data.frame.matrix(tab) |&gt; #transformation en une matrice de format data.frame\n  rownames_to_column(\"race\") |&gt; #Les lignes étaient des \"row.names\" auxquelles on assigne un nom de colonne\n  select(-Total) |&gt; #On enlève les lignes de total\n  pivot_longer(\n    cols = -race,\n    names_to = \"salaire_quint\",\n    values_to = \"pct\"\n  ) #On transforme le tableau de telle sorte que tous les % soient dans la même colonne et les modalités de salaire également. \ndf_tab$salaire_quint &lt;- df_tab$salaire_quint |&gt;\n  fct_relevel(\n    \"Très faible\",\"Faible\",\"Moyen\",\"Elevé\",\"Très élevé\"\n  )\n\n# Graphique\nggplot(df_tab, aes(x = race, y = pct / 100, fill = fct_rev(salaire_quint))) +\n  geom_bar(stat = \"identity\") +\n  geom_label(aes(label = paste0(round(pct,0), \"%\")),\n            position = position_stack(vjust = 0.5),\n            size = 5) +\n  scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +\n  scale_fill_brewer(palette = \"PuRd\", direction = -1,\n                    guide = guide_legend(reverse = T)) +\n  labs(\n    x = \"Catégorie raciale\",\n    y = \"Pourcentage\",\n    fill = \"Quintile de salaire\"\n  ) +\n  theme_light() +\n  theme(\n    legend.position = \"bottom\",\n    axis.title.y = element_text(size = 18L),\n    axis.title.x = element_text(size = 18L),\n    axis.text.y = element_text(size = 18L),\n    axis.text.x = element_text(size = 18L),\n    legend.text = element_text(size = 18L),\n    legend.title = element_text(size = 18L)\n  )\n\n\n\n\nDiagramme à barres empilées avec étiquettes\n\n\n\n\n\n\n\n\n\n\n\nExercice\n\n\n\nÉtudier le lien entre sexe et niveau de salaire à l’aide d’un diagramme à barres empilées ou adjacentes.\n\n\n\n\n3.2.4 La force de l’association\nON ENLEVE\nPour étudier l’intensité de l’association entre deux variables qualitatives, l’indice le plus évident est le V de Cramer qui prend une valeur entre 0 (pas d’association) et 1 (association parfaite).\nÀ partir de 0,2 ou 0,3, on pourra considérer qu’il y a une association notable.\nOn le calcule ainsi :\n\ntab &lt;- Salaires |&gt;\n  freqtable(race, salaire_quint)\ncramer.v(tab)\n\n\n\n\n\n\n\nExercice\n\n\n\nL’intensité de l’association est-elle plus forte pour entre le salaire et le sexe ou le salaire et la catégorie raciale ?\n\n\n\n\n3.2.5 Un mot sur le test du khi-deux\nON DEPLACE PLUS LOIN\nDifficile de ne pas évoquer pour finir le test du chi-deux, sans toutefois trop s’y attarder. Précisons que Julien Barnier a écrit un récapitalutif très exhaustif sur ce qu’est et n’est pas le test du khi-deux (ou chi-deux ou -deux ou chi-squared…).\nÀ quoi sert le test du khi-deux :\n\nDéterminer la probabilité que les lignes et les colonnes du tableau croisé sont indépendantes\nÉvaluer si la répartition des effectifs dans une table de contingence est significativement différente de la table calculée sous l’hypothèse d’indépendance des deux variables croisées\n\nLa distribution du salaire est-elle indépendante de celle de la catégorie raciale des individus ? Y-a-t-il une association entre race et salaire ?\n\n\n\n\n\n\nExplications sur le test du khi-deux\n\n\n\n\n\nOn va poser un test statistique, avec une hypothèse H0, ou hypothèse nulle qui est que :\nLa distribution des quintiles de salaire est indépendante de la catégorie raciale.\nOn cherche à savoir à quoi ressemblerait notre tableau croisé si les deux variables étaient effectivement indépendantes l’une de l’autre et quelle est la probabilité (la p-valeur) pour que les deux variables soient effectivement indépendantes l’une de l’autre, modulo nos fluctuations d’échantillonnage.\nEn pratique, les variables sont indépendantes si :\n\nLes pourcentages lignes du tableau croisé sont les mêmes pour toutes les lignes\nLes pourcentages colonnes du tableau croisé sont les mêmes pour toutes les colonnes\n\nDans notre exemple, lignes et colonnes ne semblent pas très indépendantes.\nMais dans un échantillon issu d’une enquête, il est rare que les variables croisées soient parfaitement indépendantes car les données du tableau sont dépendantes de l’échantillon interrogé et tout échantillon est soumis à des biais (qui, si l’échantillon a été construit de manière aléatoire, sont dus au hasard, donc des fluctuations d’échantillonage).\nLe test du khi-deux permet de savoir à partir de quel seuil on peut estimer que les variations observées par rapport à la situation d’indépendante sont dues au hasard et à partir de quand elles sont dues à un lien entre les variables.\nÀ partir du tableau des effectifs, on peut calculer les effectifs théoriques, si les deux variables étaient indépendantes, grâce aux marges des lignes et des colonnes :\nEffectif théorique d’une cellule = (total ligne x total colonne) / total global\nCe qu’on peut calculer manuellement à partir des marges (les totaux) qu’on peut obtenir par exemple en faisant ainsi :\n\nSalaires |&gt;\n  freqtable(race, salaire_quint) |&gt;\n  prop(n=T)\n\nL’effectif théorique de la cellule Blanc x Très faible est donc 90,6 car :\n\n110*440/534\n\nHeureusement R dispose de la fonction chisq.test() qui permet notamment d’afficher les effectifs théoriques :\n\ntab&lt;-Salaires |&gt;\n  freqtable(race, salaire_quint)\nchi&lt;-chisq.test(tab)\nchi$expected\n\nPour mémoire les effectifs observés sont :\n\nchi$observed\n\nAlors à quel point les effectifs théoriques divergent des effectifs observés ?\nPour ce faire, on calcule des “khi-deux partiels” définis comme la distance standardisée entre les effectifs théoriques et observés :\n\n\n\nDéfinition des khi-deux partiels\n\n\nCes khi-deux partiels peuvent être calculés comme ceci :\n\n(chi$expected-chi$observed)^2/chi$expected\n\n\n\n\nKhi-deux partiels\n\n\nIci, on voit déjà que les écarts à l’indépendance sont les plus élevés pour la cellule HispaniquexTrès faible, ce que nous avions repéré avec une surreprésentation de cette catégorie raciale parmi ceux qui gagnent de faibles salaires.\nOn calcule ensuite la valeur du khi-deux du tableau, qui correspond à la somme des khi-deux partiels :\n\nsum((chi$expected-chi$observed)^2/chi$expected)\n\nQu’on obtient aussi ici :\n\nchi$statistic\n\nEst-ce que cette valeur est faible ou élevée ?\nOn va pouvoir comparer cette statistique à la “loi du khi-deux”, une distribution statistique qui nous donne les valeurs théoriques du khi-deux d’un tableau sous condition d’indépendance.\nCette loi dépend d’un paramètre : le nombre de degrés de libertés. Quel est le nombre de degrés de libertés ici ?\nIl dépend grosso modo de la taille du tableau :\n(Nombre de lignes - 1) x (Nombre de colonnes - 1)\nIci, nous avons 3 lignes et 5 colonnes, donc le degré de liberté (ddl) est égal à 8.\nOn le vérifie ici :\n\nchi$parameter\n\n\n\n\nLoi du khi-deux suivant le degré de libertés (k)\n\n\nOn va enfin calculer une probabilité (une p-valeur), qui correspond à l’aire sous la courbe théorique à droite de la valeur du khi-deux observée, qui ici vaut 0,397, comme indiqué sur la figure.\nEn effet, rappelons-nous, la p-valeur c’est la probabilité que le khi-2 théorique soit supérieur ou égal au khi-2 observé sous condition d’indépendance.\nIci, on voit que si les deux variables sont indépendantes, il y a une probabilité de presque 40 % pour que par hasard on obtienne une valeur du khi-2 au moins aussi élevée que celle qu’on a observé (8,374).\nAutrement dit, notre valeur du khi-deux est assez plausible / compatible avec le fait que les deux variables soient indépendantes !\nCette p-valeur nous empêche de rejeter l’hypothèse d’indépendance entre catégorie racial et salaire.\nEn sciences sociales, on retient généralement le seuil d’une p-valeur de 0,05 en dessous de laquelle on estime qu’on peut rejeter l’hypothèse d’indépendance.\nPour ce faire, il aurait fallu ici obtenir un khi-2 observé au moins égal à 15,507 (on en est loin !).\n\n\n\nDistribution du khi-2 et p-valeur\n\n\nAlors que conclure ? On ne rejette pas H0, l’hypothèse d’indépendance.\nMais pouvons-nous affirmer que le salaire ne dépend pas de la catégorie raciale ? Eh bien, pas vraiment non plus. En gros, on n’a pas rejeté l’idée que les deux variables sont indépendantes, et les variations observées peuvent être dues à des fluctuations d’échantillonnage… ou pas.\nEt si la p-valeur avait été inférieure à 0,05 ? On aurait pu rejeter H0 l’hypothèse d’indépendance et on aurait considéré qu’un lien existe entre les deux variables.\nOn peut vérifier la p-valeur calculée comme ceci :\n\nchi$p.value\n\n\n\n\nOn pose l’hypothèse nulle (H0) que les deux variables sont indépendantes. On fixe un seuil de significativité pour la p-valeur égal à 0,05, en dessous de laquelle on rejette l’hypothèse d’indépendance et à ce moment là on considère qu’un lien existe entre les variables :\n\ntab&lt;-Salaires |&gt;\n  freqtable(race, salaire_quint)\nchi&lt;-chisq.test(tab)\nchi\n\nLa p-valeur est supérieure à 0,05, donc on ne peut pas rejeter H0 et on ne peut pas conclure qu’un lien existe entre les deux variables.\n\n\n\n\n\n\nExercice\n\n\n\nTester l’hypothèse d’un lien entre le sexe et les quintiles de salaire.\n\n\nON MET ICI le RECODAGE DES VARIABLES QUALIS",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Statistiques bivariées et graphiques</span>"
    ]
  },
  {
    "objectID": "statbis.html#exercices",
    "href": "statbis.html#exercices",
    "title": "3  Statistiques bivariées et graphiques",
    "section": "3.3 Exercices",
    "text": "3.3 Exercices\nON ALLEGE\n\n\n\n\n\n\nExercice\n\n\n\n\nCréer une variable haut_revenu qui vaut “oui” si un individu appartient aux 10 % les mieux rémunérés (salaire ≥ 9e décile) et “non” sinon. Calculer la proportion d’individus ayant un haut revenu pour le genre et la race, calculer les V de Cramer et réaliser des tests du khi-deux. Réaliser des diagrammes à barres. Qui sont les plus présents en haut de l’échelle salariale ?\nRecoder la variable âge en quatre groupes :\n\n\nMoins de 30 ans\n30-44 ans\n45-59 ans\n60 ans et plus\n\n\nPour chaque groupe d’âge, calculer la médiane et les quartiles du salaire et de l’expérience. Représenter ces distributions avec des boxplots. Observe-t-on un effet d’âge linéaire ?\nDécrire à l’aide d’un tableau croisé la distribution de l’âge en fonction des hauts revenus. Calculer le V de Cramer et réaliser un test du khi-deux. Réaliser un diagramme à barres. Qui sont les plus présents en haut de l’échelle salariale ?",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Statistiques bivariées et graphiques</span>"
    ]
  },
  {
    "objectID": "tutorial.html",
    "href": "tutorial.html",
    "title": "Formation R",
    "section": "",
    "text": "ON MET LES DIFFERENTS TRAITEMENTS R.\nLes tableaux finaux.\nOn met des notes de lecture.",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>tutorial.html</span>"
    ]
  },
  {
    "objectID": "topics.html",
    "href": "topics.html",
    "title": "Formation R",
    "section": "",
    "text": "To be written.",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>topics.html</span>"
    ]
  },
  {
    "objectID": "syntaxe.html",
    "href": "syntaxe.html",
    "title": "6  Organisation du code et manipulations avancées",
    "section": "",
    "text": "6.1 La notion de “projet” dans RStudio\nTout au long de ces chapitres, nous avons créé différents scripts R rassemblés dans un dossier “Formation R”. Une bonne pratique est de créer un “projet” pointant vers le dossier des scripts qui ont une cohérence ensemble (un projet de recherche par exemple), les données afférentes, etc.\nCe dossier projet peut être créé en cliquant en haut à droite sur “Project: (None)”, puis “New Project” et ici “Existing Directory” (on sélectionnera alors le dossier Formation R.\nCe dossier peut contenir plusieurs sous-dossiers :\nL’intérêt de fonctionner par projet est que RStudio va ensuite automatiquement pointer vers le dossier racine (Formation R) quand le projet est ouvert et on accèdera plus facilement à ses fichiers dans le Files et en écrivant le chemin d’accès dans ses scripts.",
    "crumbs": [
      "**To move further**",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Organisation du code et manipulations avancées</span>"
    ]
  },
  {
    "objectID": "syntaxe.html#la-notion-de-projet-dans-rstudio",
    "href": "syntaxe.html#la-notion-de-projet-dans-rstudio",
    "title": "6  Organisation du code et manipulations avancées",
    "section": "",
    "text": "Script\nData\nOutput (là où éventuellement on rassemble ses graphiques et autres jolis tableaux)",
    "crumbs": [
      "**To move further**",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Organisation du code et manipulations avancées</span>"
    ]
  },
  {
    "objectID": "syntaxe.html#organiser-son-code-et-ses-fichiers",
    "href": "syntaxe.html#organiser-son-code-et-ses-fichiers",
    "title": "6  Organisation du code et manipulations avancées",
    "section": "6.2 Organiser son code et ses fichiers",
    "text": "6.2 Organiser son code et ses fichiers\nIl est assez courant de commencer un projet et d’y revenir des mois voire des années plus tard.\nQue faire quand on a tout oublié ?\nSi on a bien structuré son code, ce qu’on peut faire en ajoutant des sections, dans son script, on s’y retrouve plus facilement :\n\n# Ceci marque une section ------------------------------\n\nOn peut aussi commenter allégrement ses différentes opérations pour s’y retrouver :\n\n#Le dièse permet d'initier un commentaire\n# Quand on doit faire un long commentaire,\n# on peut écrire sans dièse, puis surligner le tout,\n# et taper Cmd (ou Ctrl)+Maj+C et le bloc sera mis en\n# commentaire !\n\nIl est aussi assez courant de créer différents scripts pour différents types d’opérations (mais ça dépend de ses habitudes), par exemple :\n\nUn script ou des script(s) où je réalise tous les recodages nécessaires à l’analyse et j’enregistre ma base avec les nouvelles variables (en format R, rds plutôt).\nUn ou des script(s) où je réalise toutes les opérations d’analyse.\n\nOn pourra si on le souhaite créer différents fichiers suivant l’avancement du projet et indiquer la date dans le titre. Ainsi, le fichier de recodage pourra s’appeler “20250602Recodages.R” (la date est mise dans le format AAAAMMJJ pour être sur que les fichiers soient présentés du plus ancien au plus récent dans le dossier où ils sont stockés.",
    "crumbs": [
      "**To move further**",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Organisation du code et manipulations avancées</span>"
    ]
  },
  {
    "objectID": "syntaxe.html#obtenir-de-laide",
    "href": "syntaxe.html#obtenir-de-laide",
    "title": "6  Organisation du code et manipulations avancées",
    "section": "6.3 Obtenir de l’aide",
    "text": "6.3 Obtenir de l’aide\nListons ici quelques manières d’avoir de l’aide quand le script buggue :\n\nLe premier réflexe est de chercher comment s’utilise une fonction dans R :\n\n\n?mean #le point d'interrogation ouvre la page de description de la fonction\n\n\nOn peut aussi taper son problème dans son moteur de recherche, qui renvoie souvent vers le forum Stackoverflow (mais pas que) où le problème auquel on fait face a été discuté (généralement, en anglais)\nOn peut consulter les guides de formation à R mentionnés sur la page de présentation de ce guide.\n…",
    "crumbs": [
      "**To move further**",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Organisation du code et manipulations avancées</span>"
    ]
  },
  {
    "objectID": "syntaxe.html#la-jointure-de-différents-fichiers-statistiques",
    "href": "syntaxe.html#la-jointure-de-différents-fichiers-statistiques",
    "title": "6  Organisation du code et manipulations avancées",
    "section": "6.4 La jointure de différents fichiers statistiques",
    "text": "6.4 La jointure de différents fichiers statistiques\nNous n’avons pas ici parlé de la jointure de différents fichiers statistiques, opération pourtant courante. Cette page de utilitR est très complète pour mener ces opérations sans trop se prendre la tête : https://book.utilitr.org/03_Fiches_thematiques/Fiche_joindre_donnees.html.",
    "crumbs": [
      "**To move further**",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Organisation du code et manipulations avancées</span>"
    ]
  },
  {
    "objectID": "syntaxe.html#les-étiquettes-de-variables-et-de-valeurs",
    "href": "syntaxe.html#les-étiquettes-de-variables-et-de-valeurs",
    "title": "6  Organisation du code et manipulations avancées",
    "section": "6.5 Les étiquettes de variables et de valeurs",
    "text": "6.5 Les étiquettes de variables et de valeurs\nEnfin, nous avons ici travaillé à partir de variables qui n’ont pas d’étiquettes et dont les modalités des variables catégorielles n’ont pas de labels. C’est pourtant possible (voire courant, si on charge un fichier Stata dans R) et plutôt pratique :\n\nOn a ainsi des étiquettes déjà prêtes pour les tableaux / graphiques\nOn va bien plus vite dans le recodage et surtout on évite les erreurs (recoder 1 en 3 va plus vite et comprend moins de risque d’erreur que recoder “Cadres et professions scientifiques” en “Classes supérieures”).\n\nOn se reportera aux Chapitres 11 et 12 de guide-R qui introduisent à ces concepts et leur usage.",
    "crumbs": [
      "**To move further**",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Organisation du code et manipulations avancées</span>"
    ]
  },
  {
    "objectID": "syntaxe.html#exercices",
    "href": "syntaxe.html#exercices",
    "title": "6  Organisation du code et manipulations avancées",
    "section": "6.6 Exercices",
    "text": "6.6 Exercices\n\n\n\n\n\n\nExercice\n\n\n\nCréer un Projet pointant sur le dossier de la Formation R. Commenter et créer des sections dans l’un de ses scripts. Pas facile ? D’où l’intérêt de le faire au fur et à mesure :)",
    "crumbs": [
      "**To move further**",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Organisation du code et manipulations avancées</span>"
    ]
  }
]