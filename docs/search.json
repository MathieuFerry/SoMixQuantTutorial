[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "SoMix Quant training",
    "section": "",
    "text": "Preface\nThis guide summarizes the quantitative training material proposed for the SoMix workshop in December 2025 in Colombo (Sri Lanka).\nThe various tutorials you will find here aim to familiarize the participants with a selection of functions and tools considered most relevant to descriptively handle statistical data in the social sciences, and how to produce such statistical analyzes using the R language (and the tidyverse).\nThis guide is a training support for R; it is not a full course in statistics. It is also not intended to replace the many excellent guides available on the internet, for example:\n\nR for data science",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "1.1 Install R and RStudio\nFirst, you need to install R according to your computer’s configuration, using the links available on the Comprenhensive R Archive Network (CRAN).\nThen, you can install RStudio by going to this page. RStudio is an “Integrated Development Environment (IDE)”, that is a software that provides a user-friendly interface for working with the R programming language. Note that it is possible to use other interface software, but RStudio is probably the most widely used today, and the one we will use during this training.\nIf, for one reason or another, it is not possible to install R or/and RStudio on your computer, you can temporarily use R / RStudio online by creating an account on the “Posit cloud”. However, we do not recommend this option for a long-term use as sensitive data should be stored on secured and personal servers.\nOnce R and RStudio are installed on your computer, you can directly open RStudio. It displays a nice console. You can create your first R script by clicking on the small white arrow on a green background and save it under the name 1Intro.R.",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#install-r-and-rstudio",
    "href": "intro.html#install-r-and-rstudio",
    "title": "1  Introduction",
    "section": "",
    "text": "Exercise\n\n\n\n\nOpen RStudio and create an empty script.\nCreate and save an R script, for example named 1Intro.R.",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#r-rstudio-and-the-tidyverse",
    "href": "intro.html#r-rstudio-and-the-tidyverse",
    "title": "1  Introduction",
    "section": "1.2 R, RStudio and the tidyverse",
    "text": "1.2 R, RStudio and the tidyverse\nR is a programming language developed since the 1990s. It is derived from the S language and also shares some similarities with the C language. It is open-source and free of charge.\nAmong the many strengths of R, it has a large community of users, who can also take on the role of developers who continuously contribute to improve R language and what it can do. R therefore has numerous extensions in the form of functions, stored in packages (or libraries), which greatly facilitate its use. The list of packages available on CRAN is available here: https://cran.r-project.org/web/packages/. Although we will not be using them in this training seminar, please note that it is also possible to use packages that are not on CRAN.\nWith more than 22,000 packages, it’s easy to get lost. Throughout this guide, we will review a few packages that we considered helpful for making life easier when doing statistics in the social sciences. Again, let’s underline here that the goal of this guide is not to be exhaustive, nor to impose anything. One particularity of R is that it is often possible to do the same thing using different operations / functions / packages. Everyone eventually finds their own little “tricks”!\nThe tidyverse package includes a suite of packages designed to work together, making data manipulation, recoding, and the production of graphics easier compared to the basic R language, often referred to as “base R”. We will rely on functions and tools from the tidyverse package for our statistical work. You can have a look to the following small presentation of the tidyverse.\n\n\n\n\n\n\nExercise\n\n\n\nInstall the tidyverse package, then load it into the R session using the two lines of code below. You can copy-paste them into your script and run them (see the next section if you don’t know how to run lines of code).\n\n\n\ninstall.packages(\"tidyverse\")\nlibrary(tidyverse)\n\n\n\n\n\n\n\nNote\n\n\n\nYou only need to install packages once; however, you must load the package each time you open a new R session. So, if you close RStudio and then reopen it, there is no need to run install.packages(\"tidyverse\") again — but to use the functions from this package, you still need to load the tidyverse package by running the following code: library(tidyverse).\nCalling the relevant packages is generally done systematically at the beginning of the script.",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#rstudio-as-a-working-tool",
    "href": "intro.html#rstudio-as-a-working-tool",
    "title": "1  Introduction",
    "section": "1.3 RStudio as a working tool",
    "text": "1.3 RStudio as a working tool\nBy default, the console is displayed in the form of four panels:\n\nThe first panel in the top left corresponds to the R script file, which for now is empty (or almost empty, if you have already copy-pasted the lines of code to install and load tidyverse). This is where we will write the command lines that we will run, either by clicking the ‘Run’ button, or by using the keyboard shortcut Cmd + Enter (or Control + Enter).\nThe second panel in the bottom left corresponds to the console. For now, it simply tells us that it has loaded R in the most up-to-date version found on my computer (4.4.3). The console will display the commands that we have run and the messages returned by R when executing them.\nThe third panel in the top right contains several tabs. The most important one is the Environment tab, which shows all the objects created in the current session (data frames, lists, vectors, etc.).\nThe fourth panel in the bottom right also contains several tabs, including:\n\nFiles (which allows you to browse your computer’s directory structure),\nPlots (where our beautiful graphs will be displayed),\nPackages, which lists the packages (libraries) installed on our computer and indicates which ones are loaded in the current session (they are checked),\nHelp, which displays information about a function when you type ?function_name in the console,\nand Viewer, where our nice tables will appear.\n\n\n\n\n\n\n\n\nExercise\n\n\n\nCheck that the tidyverse package is correctly installed and loaded in the R session.\n\n\n\n\n\nThe RStudio console\n\n\n\n\n\n\n\n\nCaution\n\n\n\n\nWhen quitting RStudio, a window may appear asking whether you want to “Save the workspace image…”. Warning: in fact, it is not a good idea to click Save!\nBecause this saves the entire workspace (the session), which will be automatically reopened when restarting RStudio, and you may end up with objects (for example, old databases that you used for former projects) that are no longer relevant for a later session (and that may even conflict with one another).\nIf you did not click on ‘Save’, reopening RStudio resets the R session. To make sure this is really the case (clear the global environment, unload packages, reset memory, etc.), you can type the following code in the console:\n\n\n.rs.restartR()",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#loading-data-into-r",
    "href": "intro.html#loading-data-into-r",
    "title": "1  Introduction",
    "section": "1.4 Loading data into R",
    "text": "1.4 Loading data into R\nTo do statistics, we need data. Here, we are going to use excerpts of the Household Income and Expenditure Survey 2019 collected by the Sri Lankan Department of Census and Statistics.\nThe full questionnaire of the survey is shown below:\n\n\n\n\nFor legality matters, you will need to create an account on the Lanka data platform and download the microdata files from the online platform. Notice that you are able to download only 25% of the total survey sample.\nFor this workshop, we have additionally prepared four files to make your life easier to manipulate the survey, which you can access here Data repository. You will need to provide a password (request password by email!). Download the files from this online folder. The folder contains a PDF of the questionnaire and a zipped folder which you can unzip on your computer. In the zipped folder, you will find four “.rds” files (R statistical files):\n\ndemo.rds contains data from Section 1 of the survey, i.e. on demographic characteristics of all household members\nedu.rds contains data from Section 2 of the survey, i.e. on school education for household members aged 5 to 19\nhealth.rds contains data from Section 3A of the survey, i.e. on health treatment and chronic illness\nenvironment.rds contains data from Section 7 & 8, i.e. on access to primary facilities and housing information\n\nWARNING: The unit of analysis (a “row” in the data file) differs in the four different files. For demo.rds, a row in the data file refers to one household member, irrespective of their age (N=19,848). Within a household, each member has its own row. For edu.rds, one row also refers to one individual from a household, but this time there is an additional age restriction: only household individuals aged 5 to 19 (N=4,552). For health.rds , one row refers to one individual; even if there is no age restriction, the sample is smaller than demo.rds since some individuals did not answer questions related to health in the questionnaire (section 3A) (N=18,468). Finally, for environment.rds, one row refers to one household (and not to one individual, as it is the case in the other datasets) (N=4,982).\nIn addition to the variables (the different “columns” of the files) specific to each file, we have already added a number of socio-demographic variables in the files with data at the individual level (demo.rds, edu.rds and health.rds) to ease statistical manipulations, including:\n\nhhid: a unique household identifier (also available in environment.rds)\nindid: a unique individual identifier\nedu_attained: this is a recoded version of individual educational attainment\nedu_father: father’s educational attainment (only in edu.rds)\nedu_mother: mother’s educational attainment (only in edu.rds)\nedu_parent: combined parents’ educational attainment, i.e. maximum educational attainment between both parents (only in edu.rds)\nage: individual’s age\nbirth_year: individual’s year of birth\nsex: individual’s sex\nage_father: father’s age (only in edu.rds)\nage_mother: mother’s age (only in edu.rds)\nprovince: province of residence\nethnicity: household head’s ethnicity\nreligion: household head’s religion\nhhwealth: a continuous variable to proxy households’ material well-being (an index based on durable goods ownership which we constructed ourselves)\nhhwealthcat: a categorical variable to proxy households’ material well-being (an index based on durable goods ownership which we constructed ourselves)\nfinalweight_25per: a “survey weight” variable to use in all statistical treatments to get correct estimates!\n\nLet’s load edu.rds into RStudio. Generally, there are three options to import data into R:\n\nIn the bottom-right panel, you can browse your folder structure to find the appropriate file, and click on it.\nYou can click Import Dataset in the top-right panel, then click Browse and navigate through Finder or File Explorer.\nYou can directly use lines of code written in your script to load your file.\n\nThe third solution is preferable, in the interest of making your code reproducible. But the first or the second have the advantage of being easier when you are not familiar with coding, especially since these “point-and-click” solutions also provide the corresponding lines of code, which you can copy into your script for your next working session!\n\n\n\n\n\n\nExercise\n\n\n\nLoad edu.rds using the first solution. Then, use the code below to directly use the second solution. Note that the line setwd(\"/home/groups/3genquanti/SoMix/HIES for workshop\") indicates where you have stored your files locally on your computer. You can retrieve the file path of your files in Finder or File Explorer by right-clicking on the data file, then selecting Properties or Get Info.\n\n\n\nsetwd(\"/home/groups/3genquanti/SoMix/HIES for workshop\")\nedu&lt;-readRDS(\"edu.rds\")",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#describe-your-dataset",
    "href": "intro.html#describe-your-dataset",
    "title": "1  Introduction",
    "section": "1.5 Describe your dataset",
    "text": "1.5 Describe your dataset\nThe dataset should now appear in the Environment (top-right tab).\nTo see the data file (you can also click on it):\n\nView(edu)\n\nSeveral ways of better describing your dataset can be useful:\n\nYou can type the name of the dataset edu in the console, which will display the dataset: we do not recommended this option!\nYou can also type str(edu) to understand the structure of the dataset.\nYou can also type summary(edu) to obtain a summary of the quantitative variables in the dataset.",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#a-few-functions-to-manipulate-data",
    "href": "intro.html#a-few-functions-to-manipulate-data",
    "title": "1  Introduction",
    "section": "1.6 A few functions to manipulate data",
    "text": "1.6 A few functions to manipulate data\n\n1.6.1 Accessing a variable\nThe dataset is therefore composed of 38 variables. To access a variable — for example the variable age — you can type:\n\nedu$age\n\nThe $ sign indicates that we are accessing the variable age contained in the edu dataset. This command returns a vector of the values of the variable.\nIn the tidyverse, we call objects using pipes, which come in two different (and largely equivalent) operators: %&gt;% and |&gt;. We will favor the second one (but they are largely interchangeable!).\nFor example, to calculate the mean of age, we would write:\n\nedu |&gt; summarise(mean(age))\n\nsummarise is the function that allows you to summarise the dataset according to the function specified. Note that we could also have written:\n\nedu |&gt; summarise(Mean_age=mean(age))\nedu |&gt; summarise(`Mean age`=mean(age))\n\n\n\n1.6.2 Transforming a variable\nLet’s assume the database does not include age but only year of birth (birth_year). In that case, we could create a variable returning individuals’ age using the information from the variable birth_year. Here, we use the function mutate to create/transform variables. Since the data that we use have been collected in 2019, we can then create a new variable that we decide to name ‘age_created’ to return individual’s age using the following code:\n\nedu &lt;- edu |&gt; mutate(age_created=2019-birth_year)\n\n\n\n1.6.3 Selecting columns\nTo create a database called edu2 where we select only certain variables from the initial database edu, we write:\n\nedu2&lt;- edu %&gt;% select(hhid,age,sex,edu_attained)\n\nselect allows to select only some columns (that is, some variables, as one column refers to one variable) of the dataframe.\nSimilarly, select can be used to remove columns:\n\nedu3 &lt;- edu2 |&gt; select(-c(edu_attained,sex))\n\n\n\n1.6.4 Selecting rows\nTo create a database from edu where we decide to study only male respondents:\n\nedum &lt;- edu |&gt; filter(sex==\"Male\")\n\nfilter allows you to select the rows of the dataset that satisfy a given condition (in this example, we keep only the rows for which the variable sex equals the modality “Male”; in other words, we keep only male respondents). The ampersand operator & means “and”. If you want to use the logical “or” operator, you write: |.\nLet’s say we want to study only female respondents with less than primary attainment:\n\nedufl&lt;- edu |&gt; filter(sex==\"Female\" & edu_attainment==\"Less than primary\")\n\n\n\n1.6.5 Renaming a variable\nLet’s rename a variable in edufl:\n\nedufl &lt;- edufl |&gt; rename(ethnic_category=ethnicity)\n\nThe variable ethnicity has been renamed as ethnic_category.",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#saving-data",
    "href": "intro.html#saving-data",
    "title": "1  Introduction",
    "section": "1.7 Saving data",
    "text": "1.7 Saving data\nTo save databases from R (because you have done some data management and want to save your file), there are several solutions.\n\n1.7.1 Native R formats\n\nYou can save your data in .RData format. This is the simplest option — no hassle — and the advantage is that you are sure to preserve the format of the variables, the labels (we will come back to this later), etc.\n\n\nsave(edufl,file=\"edufl.RData\")\n\nBefore using this function, we should not forget to run setwd(\"path to the folder where we want the file to be saved\") to indicate where to save the file (or at least to check that R is indeed pointing to the desired folder using the getwd() command).\nNote that the RData format can perfectly well be used to save several R objects in the same file:\n\nsave(edufl,edum,file=\"eduv2.RData\")\n\nTo reopen an .RData file, you simply need to write:\n\nload(\"eduv2.RData\")\n\nThe drawback of the .RData format is that, since there may be several objects in the file, we do not know what they are called and we cannot directly assign a default object name when opening it in the R console. This can sometimes be risky (imagine that we have a file eduv2.RData that contains edufl and edum, but that we already have an object called edum in our environment that is actually different — when opening eduv2.RData, the existing object would be overwritten).\nFor this reason, datasets can be saved individually using the .rds format with specific functions (this is how you have been provided with the workshop data):\n\nsaveRDS(edum, \"edum.rds\")\n\nWhen opening an .rds file, you explicitly control the name that will be assigned to it in the R environment (which in this case does not necessarily need to be edum):\n\nedum2 &lt;- readRDS(\"edum.rds\")\n\n\n\n1.7.2 CSV format\n\nWe sometimes need to export our data in CSV format. In that case, we use functions from the readr package, such as write_csv (which uses commas as column separators and periods as decimal markers).\n\nThe CSV format with comma separators is the international standard for CSV files, and it is easily formatted when Excel on one’s computer is configured in English:\n\nwrite_csv(edu, \"edu.csv\")\n\n\n\n1.7.3 Other formats\n\nIf you want to save your file directly as an Excel file, this is also possible. At least two packages allow this: writexl and openxlsx. If we install openxlsx (install.packages(\"openxlsx\")):\n\n\nlibrary(openxlsx)\nwrite.xlsx(edu, \"edu.xlsx\")\n\nIf you want to read an Excel file, you can use read.xlsx from the same package. Here, the argument sheet=NULL indicates that we are reading all the sheets of the Excel file if there are several:\n\nread.xlsx(\"Salaires.xlsx\", sheet = NULL)\n\n\nSometimes we work with colleagues who use other proprietary paid softwares (what an idea!). In that case, we can use the haven package, which allows to save data in SAS, SPSS or Stata format:\n\n\nlibrary(haven)\nwrite_dta(edu, \"edu.dta\")\nwrite_sas(edu, \"edu.sas7bdat\")\nwrite_sav(edu, \"edu.sav\")\n\nBe careful: with the SAS format, the conversion of value labels is not as straightforward as with other software.",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "intro.html#exercise",
    "href": "intro.html#exercise",
    "title": "1  Introduction",
    "section": "1.8 Exercise",
    "text": "1.8 Exercise\n\n\n\n\n\n\nExercise\n\n\n\nSave as an .rds file a dataset created from edu with the following conditions:\n\nIt contains only the columns hhid, edu_attained, age, and sex.\nIt contains only individuals who, at the time of the survey, are not in school (r2_school_education %in% c(2, 3)).",
    "crumbs": [
      "**Discovering R**",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "statunis.html",
    "href": "statunis.html",
    "title": "2  Survey data and univariate statistics",
    "section": "",
    "text": "2.1 Working with survey data\nThe Household Income and Expenditure Survey (HIES) data have been collected on a sample of households in Sri Lanka. This sample, thanks to the household selection procedures included in the survey, is representative of the entire population of Sri Lanka.\nKeep in mind that the selection is based on a complete enumeration of households and a random selection of households included in the sample (in fact, it’s a little more complex, but that’s the general idea).\nWhy use a sample instead of surveying the entire population? Sampling allows the collection of high-quality, representative data at lower cost and in less time, and all public and private statistical institutes use this type of survey method.\nGenerally, sample data include a weight variable. These weights ensure the representativeness of the sample for the entire population, that is, in our case, of individuals living in Sri Lanka at the time of the survey. To put it simply, in the most common case, the weights correct biases in data collection because not all selected respondents were actually surveyed, and the weight corrects for these biases.\nThese types of data are very common in the social sciences (and the DCS conducts several sample-based surveys, such as the Time Use Survey, the Labor Force Survey, etc.), so it is important to know how to handle them.\nThus, all statistical operations performed on HIES files must take this weighting into account. For example, in the previous section we calculated the average age of respondents to the education module. Since we did not use a weight variable, we simply calculated the mean among the respondents. If we had taken weighting into account, we would have inferred the average age of children between 5 and 19 years old for the entire population.\nIn our HIES files, the correct variable weight variable is finalweight_25per (this is a specific weight variable to this sample because we are working with a 25% random sample of the survey sample, which is itself a random sample of the entire population).",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey data and univariate statistics</span>"
    ]
  },
  {
    "objectID": "statunis.html#describing-a-numerical-variable",
    "href": "statunis.html#describing-a-numerical-variable",
    "title": "2  Survey data and univariate statistics",
    "section": "2.2 Describing a numerical variable",
    "text": "2.2 Describing a numerical variable\n\n2.2.1 Summarizing variables based on a few statistics\nIn R, we can easily summarize a numerical variable using a few statistical indicators:\n\nMinimum\nMean\nMedian\nMaximum\n\nThe minimum and maximum give an idea of the range of values taken by the variable, while the mean and median are measures of central tendency.\nIt is often useful to estimate the median in addition to the mean when studying a numerical variable. Indeed, the mean is sensitive to “extreme” values in a distribution.\nThe median is the value that separates the lower half from the upper half of a statistical distribution (50% of the population has a lower value, 50% has a higher value). When the mean and median differ greatly, it indicates that the distribution of the variable is not evenly spread around the mean.\nTypically, when studying income, the mean is often much higher than the median, while the median is a more stable measure of central tendency. This is because only a few individuals have very high incomes, which tends to increase the mean.\nTo obtain these statistics for the variable distance which indicates the distance from home to school for children:\n\nedu |&gt;\n  summarise(\n    min    = min(distance, na.rm = TRUE),\n    mean   = wtd.mean(distance,weights=finalweight_25per,na.rm = TRUE),\n    median = wtd.quantile(distance,probs=.5,weights=finalweight_25per,na.rm = TRUE),\n    max    = max(distance, na.rm = TRUE),\n    n_na   = sum(is.na(distance))\n  )\n\nNotice that we use finalweight_25per to calculate the mean and the median, but not to calculate the minimum and maximum. Here, the minimum and maximum suggest that some children live very close to their school, but for at least one child, the school is pretty far from home!\nThe mean is higher than the median, indicating that a few unusually high distance values are stretching the upper tail of the distribution, resulting in a right-skewed distribution.\nWe also added the number of NA cases in this variables, i.e. the number of missing variables. In fact, here this corresponds to children who actually do not attend school.\nWe produced such a nice output that we would like to display it as a table, but copying and pasting it from the console doesn’t look very nice…\nNo worries — there are plenty of packages in R to create beautiful table outputs. Here, we propose using kableExtra :\n\nsummary&lt;-edu |&gt;\n  summarise(\n    min    = min(distance, na.rm = TRUE),\n    mean   = wtd.mean(distance,weights=finalweight_25per,na.rm = TRUE),\n    median = wtd.quantile(distance,probs=.5,weights=finalweight_25per,na.rm = TRUE),\n    max    = max(distance, na.rm = TRUE),\n    n_na   = sum(is.na(distance))\n  )\nsummary |&gt; kbl() |&gt; kable_classic(full_width = F)\n\n#Or to have a lower number of digits for the mean: \nsummary |&gt; kbl(digits=2) |&gt; kable_classic(full_width = F)\n\nThe function kbl transforms the summary object into a table in LaTeX/HTML format, which is displayed in the Viewer (bottom-right panel), and the function kable_classic is one of the default formatting options I chose.\nThese tables can be customized endlessly (including adding titles, captions, etc.). The main advantage is that they can be copied and pasted cleanly into your report, article, or thesis.\n\n\n\nTable created with kableExtra and displayed in the Viewer\n\n\n\n\n2.2.2 Summarizing a quantitative variable with a graph\nAll of this looks nice and seems to suggest that distance is a skewed variable with a distribution stretched to the right. Can we visualize the distribution of this variable?\nWe can use the esquisse package, which provides a point-and-click solution for creating plots. You need to run the following line (be a little patient while the page loads). This avoids having to write the code yourself to create the plot using the ggplot2 package.\n\nesquisser(edu)\n\nThis should load an interface with the different variables from the dataset at the top, which you will need to drag into the corresponding boxes.\n\n\n\nEsquisse interface\n\n\nBy dragging the distance variable into the X box, a histogram is created automatically. You can modify this representation, for example, by choosing a density plot instead. The entire graph is customizable using the options below.\nFinally, you can save your plot and also copy the code that generates the same plot without having to reopen Esquisse!",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey data and univariate statistics</span>"
    ]
  },
  {
    "objectID": "statunis.html#describing-a-categorical-variable",
    "href": "statunis.html#describing-a-categorical-variable",
    "title": "2  Survey data and univariate statistics",
    "section": "2.3 Describing a categorical variable",
    "text": "2.3 Describing a categorical variable\nDescribing a numerical variable is nice, but we often also have categorical variables. How can we describe them?\nThe function freqtable from the questionr package allows you to get the weighted counts of a categorical variable, and freq calculates the corresponding percentages (%val corresponds to the percentages of non-NA categories).\nNote that it is always possible to remove the part weights=finalweight_25per to get unweighted counts. This is useful as we always want to have weighted percentages, but the unweighted number of individuals on which this percentage has been calculated: indeed, statistics tends to be less robust when they are calculated on small subsamples, so it is always interesting to keep in mind the number of respondents available in our (sub)sample.\nHere, we are interested in the variable r2_school_education, which corresponds to the respondents’ school status.\n\nedu |&gt; freqtable(r2_school_education,weights=finalweight_25per) |&gt; freq()\nedu |&gt; freqtable(r2_school_education) |&gt; freq()\nedu |&gt; freqtable(r2_school_education,weights=finalweight_25per) |&gt; freq() |&gt; select(-n)",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey data and univariate statistics</span>"
    ]
  },
  {
    "objectID": "statunis.html#recoding-a-categorical-variable",
    "href": "statunis.html#recoding-a-categorical-variable",
    "title": "2  Survey data and univariate statistics",
    "section": "2.4 Recoding a categorical variable",
    "text": "2.4 Recoding a categorical variable\nThe categories of r2_school_education are here coded as 1, 2, and 3. This is because when getting the from the Lanka data, we got CSV files without any data labels so we need to recode them ourselves based on the questionnaire of the survey.\nLuckily, this task can be done very easily by using the irec() interface (from the questionr package created by Julien Barnier). Type it in the console and the following window will open to recode a new variable with explicit levels (in the R lingo, these are factor levels).\n\nirec()\n\n  The last panel shows you the R code to recode the variable. When clicking on ‘Done’, this code is sent to the Console. We strongly advise you to copy-paste this code into your script to keep track of all your recoding steps! This way, you will be able to re-run all your analyses at once whenever you want just by clicking on the ‘Run’ button for your whole code.\n\n\n\n\n\n\nExercise\n\n\n\nWith the newly recoded variable of school attendance, recompute the % distribution of this variable. Then, open Esquisse and draw a graph of this variable.",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey data and univariate statistics</span>"
    ]
  },
  {
    "objectID": "statunis.html#recoding-a-numerical-variable-to-a-categorical-variable",
    "href": "statunis.html#recoding-a-numerical-variable-to-a-categorical-variable",
    "title": "2  Survey data and univariate statistics",
    "section": "2.5 Recoding a numerical variable to a categorical variable",
    "text": "2.5 Recoding a numerical variable to a categorical variable\nIt can be useful to analyze distance to school not as a numerical variable but as a categorical variable (for example, what proportion of students have a school less than 1 km of their home away?).\nRecoding a quantitative variable into a qualitative variable is straightforward. In R, we can use another add-in from the questionr package: icut:\n\nicut()\n\nYou can then choose the dataset in which you want to recode a variable, select the variable to recode, and specify the name of the recoded variable (by default, the old variable name with “_rec” added). This add-in relies on R’s cut() function.\nDifferent recoding options are offered:\n\nManually (if you have identified key values, or know key thresholds for a variable, for example a poverty level),\nUsing a reclassification algorithm (Jenks, which geographers often use, or other algorithms),\nUsing quantiles,\nUsing equal-width intervals in the distribution.\n\nHere, we choose to recode the variable into quartiles. The newly created variable corresponds to 4 categories, each roughly representing 25% of the unweighted respondents. However, this division is not always exact, especially when many individuals share the same value — in this case, the number of kilometers.\n  \nYou can then click ‘Done’. Note that the variable has not yet been created, but in the console, the code to create it is provided. You just need to copy and paste it into your script and run it (you can also modify it directly yourself if you want):\n\n## Cutting edu$distance into edu$distance_rec\nedu$distance_rec &lt;- cut(edu$distance,\n  include.lowest = TRUE,\n  right = FALSE,\n  dig.lab = 4,\n  breaks = c(0, 1, 2, 4, 84)\n)\n\n\n\n\n\n\n\nExercise\n\n\n\n\nStudy the distribution of the newly created variable distance_rec.\nSave your dataset as a rds file with the name “edu_rec.rds”.",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey data and univariate statistics</span>"
    ]
  },
  {
    "objectID": "statbis.html",
    "href": "statbis.html",
    "title": "3  Bivariate statistics and more graphics",
    "section": "",
    "text": "3.1 The association between a categorical variable and a numerical variable\nIn section 2 on univariate statistics, we discussed several indicators of the distribution of a numerical variable (minimum, maximum, mean, median). Thanks to the lines of code already set up, it is easy to calculate these statistics for different categories of another categorical variable.\nYou simply need to add another function to compute these statistics for each category of a variable, namely group_by:\nedu |&gt;\n  group_by(province) |&gt;\n  summarise(\n    min    = min(distance, na.rm = TRUE),\n    mean   = wtd.mean(distance,weights=finalweight_25per,na.rm = TRUE),\n    median = wtd.quantile(distance,probs=.5,weights=finalweight_25per,na.rm = TRUE),\n    max    = max(distance, na.rm = TRUE),\n    n_na   = sum(is.na(distance))\n  )\nLet’s study the distance to school according to the place of residence: urban, rural, or estate. This corresponds to the variable sector, with categories 1, 2, and 3. We can recode these categories using the icut() interface, or directly with the following code:\nedu$sector_rec &lt;- edu$sector  |&gt;\n  as.character() |&gt;\n  fct_recode(\n    \"Urban\" = \"1\",\n    \"Rural\" = \"2\",\n    \"Estate\" = \"3\"\n  )\n\nedu |&gt;\n  group_by(sector_rec) |&gt;\n  summarise(\n    min    = min(distance, na.rm = TRUE),\n    mean   = wtd.mean(distance,weights=finalweight_25per,na.rm = TRUE),\n    median = wtd.quantile(distance,probs=.5,weights=finalweight_25per,na.rm = TRUE),\n    max    = max(distance, na.rm = TRUE),\n    n_na   = sum(is.na(distance))\n  )\nWe can analyse how the distance to school varies across multiple categorical variables. For example, we can compute the mean and the median with respect to both the province and the place of residence:\nedu |&gt;\n  group_by(province,sector_rec) |&gt;\n  summarise(\n    mean   = wtd.mean(distance,weights=finalweight_25per,na.rm = TRUE),\n    median = wtd.quantile(distance,probs=.5,weights=finalweight_25per,na.rm = TRUE)\n  ) |&gt; \n  kbl(digits=1) |&gt; kable_classic(full_width = F)\nThe distance to school tends to be higher in rural areas, and this difference is mainly driven by extreme values. Indeed, it is primarily the mean, which is more sensitive to large values, that reflects this gap, more so than the median.\nedu |&gt;\n  group_by(province,sector_rec) |&gt;\n  summarise(\n    mean   = wtd.mean(distance,weights=finalweight_25per,na.rm = TRUE) \n  ) |&gt; \n  pivot_wider(names_from=sector_rec,values_from=mean) |&gt;\n  mutate(`Urban-Rural difference`=Urban-Rural) |&gt;\n  kbl(digits=1) |&gt; kable_classic(full_width = F)\nWe can clearly see from this last analysis that this pattern holds in all provinces (except North Western), but the gap varies: it is higher in the Sabaragamuwa and Southern provinces, where the distance to school for children in estate areas is particularly pronounced.",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Bivariate statistics and more graphics</span>"
    ]
  },
  {
    "objectID": "statbis.html#the-association-between-a-categorical-variable-and-a-numerical-variable",
    "href": "statbis.html#the-association-between-a-categorical-variable-and-a-numerical-variable",
    "title": "3  Bivariate statistics and more graphics",
    "section": "",
    "text": "Urban-rural gap in distance to school by province\n\n\n\n\n\n\n\nUrban-rural gap in distance to school by province\n\n\n\n\n3.1.1 Summarizing with the mean and the standard deviation\nIt is quite common in scientific articles to describe quantitative variables by reporting the mean (a measure of central tendency) and the standard deviation (a measure of dispersion, equal to the square root of the variance).\n\nedu |&gt;\n  group_by(sector_rec) |&gt;\n  summarise(\n    mean= mean(distance,na.rm=T),\n    sd= sd(distance,na.rm=T),\n  ) |&gt;\n  kbl(digits=1) |&gt; kable_classic(full_width = F)\n\n\n\n\nMean and standard deviation of distance to school by residence\n\n\nWhy are these two indicators used in particular? First, we can say from this table that, on average, the distance to school is higher for children in rural areas than in urban areas. There is also greater variability in the distance to school in rural areas (sd stands for standard deviation).\n\n\n\n\n\n\nTip\n\n\n\nShould we summarize a variable by its mean or its median?\nThe first option is very common (especially in English-language journals) but is not necessarily the most appropriate…\nWhen working with skewed (i.e., non-normal) distributions:\n\nThe mean is sensitive to extreme values in the distribution.\nIt may be best to have a look at both and plot the distributions!\n\nNote: in fact, the standard deviation is then also not really a reliable indicator of dispersion describing the distribution. One may then prefer to calculate quantiles (e.g. quartiles, following Tukey’s 5 number summary!).\n\n\n\n\n\n\n\n\nExercise\n\n\n\nUsing esquisser, reproduce the following plot. Try to improve it by playing with color palettes, font sizes…\nWhat is your take away from this plot and from the previous statistics?\n\n\n\nDensity of the distance to school by residence location",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Bivariate statistics and more graphics</span>"
    ]
  },
  {
    "objectID": "statbis.html#the-association-between-two-categorical-variables-and-the-cross-tabulation",
    "href": "statbis.html#the-association-between-two-categorical-variables-and-the-cross-tabulation",
    "title": "3  Bivariate statistics and more graphics",
    "section": "3.2 The association between two categorical variables and the cross-tabulation",
    "text": "3.2 The association between two categorical variables and the cross-tabulation\n\n3.2.1 Some conventions for cross-tabulations\nWe now come to cross-tabulations to study the associations between two categorical variables.\nFirst, let’s recall a few analysis conventions. It’s easy to get confused when creating cross-tabulations, so keep the following points in mind:\n\nWhat is my response variable (also called dependent variable), i.e., the variable assumed to depend on another factor or, in other words, the variable that we want to explain?\nWhat is my independent variable, i.e., the variable assumed to have an effect on the dependent variable?\n\nHere, we can for example make the assumption that attending school (variable r2_school_education) depends on different variables such as the parents’ level of education, but also parental economic status, the place of residence, etc.\nTo visualize whether a factor affects a dependent variable, we can create a cross-tabulation in which:\n\nThe dependent variable is placed in the columns.\nThe independent variable is placed in the rows.\nRow percentages are calculated (we need to normalize the row counts to compare them!).\nWe then compare the rows within the same column.\n\nOf course, this is theory.\nThere are many cases where we might be more interested in column percentages, or even total percentages, or we may want to swap rows and columns. Nevertheless, keeping these simple conventions in mind helps to stay oriented when navigating statistical analyses.\n\n\n3.2.2 A practical application of the cross-tabulation\nLet’s try to do some cross-tabulations then. We again use the functions from the questionr package. To create a cross-tabulation of unweighted counts, we can write:\n\nedu$r2_school_education_rec &lt;- edu$r2_school_education  |&gt;\n  as.character() |&gt;\n  fct_recode(\n    \"Currently attending\" = \"1\",\n    \"Never attended\" = \"2\",\n    \"Attended school in the past\" = \"3\"\n  )\n\nedu |&gt; freqtable(sector_rec,r2_school_education_rec) |&gt;\n  kbl() |&gt; kable_classic(full_width = F)\n\n\n\n\nFrequency cross-tabulation\n\n\nThe row variable (here edu_parents) is the independent variable — it is written first — while the column variable (here r2_school_education_rec) is the dependent variable.\nThe table of counts is useful because it shows that some cells contain relatively small numbers of observations, which should make us cautious when interpreting the corresponding rows/columns.\nTo obtain total percentages (joint percentages):\n\nedu |&gt; freqtable(sector_rec,r2_school_education_rec,weights=finalweight_25per) |&gt;\n  prop() |&gt;\n  kbl(digits=1) |&gt; kable_classic(full_width = F)\n\n\n\n\nJoint percentages\n\n\nFrom this table, we can say that the most frequent combination of residential location and children’s schooling status is children living in rural areas who are currently enrolled in school (68% of all children).\nWe can also compute column percentages:\n\nedu |&gt; freqtable(sector_rec,r2_school_education_rec,weights=finalweight_25per) |&gt;\n  cprop() |&gt;\n  kbl(digits=1) |&gt; kable_classic(full_width = F)\n\n\n\n\nColumn percentages\n\n\nHere, we see that among children who are currently in school, 79% live in rural areas (and 79% of all children, regardless of schooling status, live in rural areas).\nAmong children who have never attended school, 83% live in rural areas. Children from rural areas are therefore slightly over-represented among those who have never attended school.\nConversely, they are slightly under-represented among children who are not currently enrolled but have been enrolled in the past (78%).\nFinally, row percentages make interpretation easier when assessing whether there is an association between residential location and schooling:\n\nedu |&gt; freqtable(sector_rec,r2_school_education_rec,weights=finalweight_25per) |&gt;\n  lprop() |&gt;\n  kbl(digits=1) |&gt; kable_classic(full_width = F)\n\n\n\n\nRow percentages\n\n\nHere, we see that, regardless of residential location, the most frequent situation for children is to be currently enrolled in school.\nOnly 3% of children have never attended school, and this configuration is slightly less common in urban areas and estates. In other words, never having attended school — a very marginal situation overall — is mainly a rural phenomenon.\n\nSalaires |&gt; freqtable(race,salaire_quint) |&gt; prop(n=T,digit=0)\n\n\n\n\n\n\n\nExercise\n\n\n\nStudy the association between age and school attendance with a row percentage cross tabulation.\n\n\n\n\n3.2.3 From the table to the graphic\nEsquisse can again in these cases be used to represent graphically the association between residence and school attendance. Here, our category of interest is specifically “never attending school”.\nYou first need to store the row-percentage tabulation (transformed as a “data.frame” using the as.data.frame() function) in an object (rtab), then open esquisser with this specific command.\n\nrtab&lt;-edu |&gt; freqtable(sector_rec,r2_school_education_rec,weights=finalweight_25per) |&gt;\n  lprop() |&gt; as.data.frame() \nesquisser(rtab)\n\nYou can then drop the residence variable on the X-axis tab and Freq in the Y-axis tab. Using the “Data” section at the bottom, remove all the categories of the r2_school_education_rec variable, except “Never attending school”. You can further refine the graphic by increasing the font, changing the axis labels, adding a title…\n\n\n\nNever attending school children\n\n\n\n\n3.2.4 Cross-tabulation with three variables?\nVery often, we study social processes that depend on multiple social factors. For instance, school attendance may vary according to age (see above exercise), but age may impact differently school attendance for male and female children.\n\nOne first easy solution to study this is simply to filter the row percentage cross tabulations according to the different categories of a third variable (here, sex).\n\nFor instance:\n\nedu |&gt; \n  filter(sex==\"Male\") |&gt;\n  freqtable(age,r2_school_education_rec,weights=finalweight_25per) |&gt;\n  lprop() |&gt;\n  kbl(digits=0) |&gt; kable_classic(full_width = F)\nedu |&gt; \n  filter(sex==\"Female\") |&gt;\n  freqtable(age,r2_school_education_rec,weights=finalweight_25per) |&gt;\n  lprop() |&gt;\n  kbl(digits=0) |&gt; kable_classic(full_width = F)\n\n \nThis code prints successively two crosstabs in the Viewer panel, but it is not ideal as we would want to see them on the same page.\n\nA second relatively easy solution is to create a new variable concatenating together the variables sex and age (individuals are simultaneously characterized by both of these dimensions) and to use it as the independent variable, thanks to the interaction function:\n\n\nedu &lt;- edu |&gt;\n  mutate(agef=factor(age),#make sure age is well ordered\n         sex_age=interaction(sex,agef,sep=\" \")) #concatenate age and sex together\nedu |&gt; \n  freqtable(sex_age,r2_school_education_rec,weights=finalweight_25per) |&gt;\n  lprop() |&gt;\n  kbl(digits=0) |&gt; kable_classic(full_width = F)\n\n\n\n\nCross tabulation with three variables\n\n\n\nThird, we can actually also simply write:\n\n\ntab3&lt;-edu |&gt; \n  freqtable(age,r2_school_education_rec,sex,weights=finalweight_25per) |&gt;\n  lprop() \ntab3\n\ntab3 contains the three-way cross tabulation. We have simply added the sex variable after the dependent within the freqtable() function.\nUnfortunately, viewing this bigger table in the Viewer panel is not so straightforward with the existing kableExtra functions. One solution is to create our own function that we will be able to use at any time whenever we want to study a 3-way cross tabulation.\nRun the following code which will create the kbl_grouped_3way() function:\n\nkbl_grouped_3way &lt;- function(tab, digits = 1) {\n  \n  # Convert to a dataframe without dropping: NA conservés\n  df &lt;- as.data.frame(tab, stringsAsFactors = FALSE, drop = FALSE)\n  \n  # Identify the three dimensions\n  dims &lt;- names(df)[names(df) != \"Freq\"]\n  dim1 &lt;- dims[1]   # ligne\n  dim2 &lt;- dims[2]   # colonne\n  dim3 &lt;- dims[3]   # groupe\n  \n  # To character\n  df[ dims ] &lt;- lapply(df[ dims ], function(x) ifelse(is.na(x), NA, as.character(x)))\n  \n  # Pivot wider\n  df_wide &lt;- df |&gt;\n    tidyr::pivot_wider(\n      names_from = all_of(dim2),\n      values_from = Freq,\n      values_fill = 0\n    )\n  \n  # Keep order\n  grouping_var &lt;- df_wide[[dim3]]\n  \n  # Construct kable\n  tab_out &lt;- df_wide |&gt;\n    dplyr::select(-all_of(dim3)) |&gt;\n    kbl(digits = digits)\n  \n  # Group levels (including NA)\n  group_levels &lt;- unique(grouping_var)\n  \n  # Line index by group\n  groups &lt;- split(seq_len(nrow(df_wide)),\n                  f = ifelse(is.na(grouping_var), \"NA\", grouping_var))\n  \n  # Pack_rows for each group in kable\n  for (g in names(groups)) {\n    rows &lt;- groups[[g]]\n    tab_out &lt;- tab_out |&gt;\n      pack_rows(group = g,\n                start_row = min(rows),\n                end_row = max(rows))\n  }\n  \n  tab_out\n}\n\nThen, just apply to the tab3 object:\n\nkbl_grouped_3way(m,digits=0) |&gt;\n    kable_classic_2(full_width = FALSE)\n\n\n\n\nSchool attendance by age and sex\n\n\nOf course, it is also possible to produce a figure, which could for instance look like this:\n\n\n\nGraphic of the school attendance by age and sex\n\n\n\n\n\n\n\n\nExercise\n\n\n\nStudy how the association between age and school attendance vary by residence locality (urban, rural and estate).",
    "crumbs": [
      "**Manipulating and analysing data**",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Bivariate statistics and more graphics</span>"
    ]
  },
  {
    "objectID": "tutorial.html",
    "href": "tutorial.html",
    "title": "4  A short example with HIES 2019",
    "section": "",
    "text": "4.1 Introduction\nAs we explained in previous sections, we first install (and load if necessary) the different packages that we will need to perform our statistical analyses. We then load the edu.rds database that we are going to use for our research question.\n# List required packages in a vector called load.lib. \nload.lib &lt;- c(\"tidyverse\",\"questionr\",\"Hmisc\",\"esquisse\",\"kableExtra\") \n\ninstall.lib &lt;- load.lib[!load.lib %in% installed.packages()] # Examine packages which are not yet installed\n\nfor (lib in install.lib) install.packages(lib,dependencies=TRUE) # Install those if required\n\nsapply(load.lib,require,character=TRUE) # Load all packages. \n\n tidyverse  questionr      Hmisc   esquisse kableExtra \n      TRUE       TRUE       TRUE       TRUE       TRUE \n\n#Load data\nsetwd(\"/home/groups/3genquanti/SoMix/HIES for workshop\")\nedu&lt;-readRDS(\"edu.rds\")\nOur main dependent variable is r2_school_education which refers to the third column of the table on “School Education (For persons aged from 5 to 19 years)” in the questionnaire Section 2 (p.324 of the report available on the shared Drive).\nIt is coded as follows: modality 1 stands for “Currently attending school”, 2 for “Never attended school” and 3 for “Attended school in the past”. Yet, in the edu.rds database, we only have these modalities as numbers (1, 2, or 3) and not what they mean. In order to make our tables and graphs easier to read, we apply the appropriate labels to each value of this variable.\nThis is what the following script does. Note that you can well use the function irec that we introduced in the second chapter to recode your variables. Besides, it is always good practice to check whether your recoding went well by comparing the initial and recoded variable, here: edu |&gt; freqtable(r2_school_education,r2_school_education_rec).\n#Recode the variable on school attendance\nedu$r2_school_education_rec &lt;- edu$r2_school_education  |&gt;\n  as.character() |&gt;\n  fct_recode(\n    \"Currently attending\" = \"1\",\n    \"Never attended\" = \"2\",\n    \"Attended school in the past\" = \"3\"\n  )\nSimilarly to what we did in the previous section on bivariate and multivariate statistics, we need to create a function that would combine the analysis of three different variables:\n# Function ----------------------------------------------------------------\n\nkbl_grouped_3way &lt;- function(tab, digits = 1) {\n  \n  # Convert to a dataframe without dropping: NA conservés\n  df &lt;- as.data.frame(tab, stringsAsFactors = FALSE, drop = FALSE)\n  \n  # Identify the three dimensions\n  dims &lt;- names(df)[names(df) != \"Freq\"]\n  dim1 &lt;- dims[1]   # ligne\n  dim2 &lt;- dims[2]   # colonne\n  dim3 &lt;- dims[3]   # groupe\n  \n  # To character\n  df[ dims ] &lt;- lapply(df[ dims ], function(x) ifelse(is.na(x), NA, as.character(x)))\n  \n  # Pivot wider\n  df_wide &lt;- df |&gt;\n    tidyr::pivot_wider(\n      names_from = all_of(dim2),\n      values_from = Freq,\n      values_fill = 0\n    )\n  \n  # Keep order\n  grouping_var &lt;- df_wide[[dim3]]\n  \n  # Construct kable\n  tab_out &lt;- df_wide |&gt;\n    dplyr::select(-all_of(dim3)) |&gt;\n    kbl(digits = digits)\n  \n  # Group levels (including NA)\n  group_levels &lt;- unique(grouping_var)\n  \n  # Line index by group\n  groups &lt;- split(seq_len(nrow(df_wide)),\n                  f = ifelse(is.na(grouping_var), \"NA\", grouping_var))\n  \n  # Pack_rows for each group in kable\n  for (g in names(groups)) {\n    rows &lt;- groups[[g]]\n    tab_out &lt;- tab_out |&gt;\n      pack_rows(group = g,\n                start_row = min(rows),\n                end_row = max(rows))\n  }\n  \n  tab_out\n}",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>A short example with HIES 2019</span>"
    ]
  },
  {
    "objectID": "tutorial.html#school-non-attendance-by-sex-and-age",
    "href": "tutorial.html#school-non-attendance-by-sex-and-age",
    "title": "4  A short example with HIES 2019",
    "section": "4.2 School non-attendance by sex and age",
    "text": "4.2 School non-attendance by sex and age\nWe first explore how attendance to school vary by sex and age. Indeed, there are reasons to think that drop out will be more likely to happen for older students. In Sri Lanka, school is compulsory until age 14, so we can imagine that attendance will decrease only from this age. Is this was we observe in the data? And are there some differences for male and female students?\nWe use the following code to produce a frequency table (with weighted percentages) to see how the distribution of each category of our dependent variable (school attendance, in column) vary according to the two independent variables we just mentioned: sex and age.\n\n# Frequency table of school attendance by age and sex ----------------------------------------------------------------\n\nm&lt;-edu |&gt; freqtable(age,r2_school_education_rec,sex,weights=finalweight_25per) |&gt;\n  lprop() \n\nkbl_grouped_3way(m,digits=0)|&gt;\n  kable_classic_2(full_width = FALSE)\n\n\n\n\nage\nCurrently attending\nNever attended\nAttended school in the past\nTotal\n\n\n\n\nMale\n\n\n5\n58\n42\n0\n100\n\n\n6\n100\n0\n0\n100\n\n\n7\n100\n0\n0\n100\n\n\n8\n100\n0\n0\n100\n\n\n9\n100\n0\n0\n100\n\n\n10\n100\n0\n0\n100\n\n\n11\n100\n0\n0\n100\n\n\n12\n100\n0\n0\n100\n\n\n13\n99\n0\n1\n100\n\n\n14\n100\n0\n0\n100\n\n\n15\n98\n0\n2\n100\n\n\n16\n74\n1\n25\n100\n\n\n17\n60\n0\n40\n100\n\n\n18\n61\n2\n37\n100\n\n\n19\n22\n0\n78\n100\n\n\nAll\n84\n3\n13\n100\n\n\nFemale\n\n\n5\n54\n46\n0\n100\n\n\n6\n100\n0\n0\n100\n\n\n7\n100\n0\n0\n100\n\n\n8\n100\n0\n0\n100\n\n\n9\n100\n0\n0\n100\n\n\n10\n100\n0\n0\n100\n\n\n11\n100\n0\n0\n100\n\n\n12\n99\n1\n1\n100\n\n\n13\n99\n0\n1\n100\n\n\n14\n97\n0\n3\n100\n\n\n15\n98\n0\n2\n100\n\n\n16\n86\n0\n14\n100\n\n\n17\n80\n2\n18\n100\n\n\n18\n68\n0\n32\n100\n\n\n19\n37\n1\n62\n100\n\n\nAll\n88\n3\n9\n100\n\n\n\n\n\n\n#Note the digits=0 argument here which means that % will be shown without any digit\n#We don’t need that level of precision (especially since the data comes from a survey and\n#has a margin of error), and the extra digits can obscure the message of the table\n\n\nThis table shows specific patterns by age.\n\nUntil age 15, the vast majority of children are currently attending school. This is true both for male and female students. However, from age 15, drop outs increase. Among male respondents aged 15 at the time of the survey, 97.6% were currently attending school. Yet, this proportion later shrinks: they are only 74.1% among male respondents aged 16, and 21.9% for those aged 19.\nConversely, the percentage of individuals who dropped out school increases with age: it goes from only 2.4% of 15 year-old men to 77.6% for 19 year-old men.\n\nOverall, we observe a similar pattern for women: school attendance rates are very high until age 15, and then consistently decrease with age. Interestingly, we also see some differences by sex. Drop out rates are larger for men than for women: while drop out rate among male respondents aged 19 is around 78%, this proportion only reaches 62% among female respondents.\nFinally, note that the proportion of students who never attended school is very negligible.",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>A short example with HIES 2019</span>"
    ]
  },
  {
    "objectID": "tutorial.html#school-non-attendance-and-locality",
    "href": "tutorial.html#school-non-attendance-and-locality",
    "title": "4  A short example with HIES 2019",
    "section": "4.3 School non-attendance and locality",
    "text": "4.3 School non-attendance and locality\nAre there some differences in school attendance by place of residence? We saw in previous sections that distance to school tends to be higher in rural areas. In that context, can we expect school attendance to be larger in urban areas in comparison to rural sectors?\nTo investigate this question, we want to check whether the rate of school attendance is similar in urban, rural areas and estates. As we observed in the previous table, school attendance greatly varies by age, so we may want to take this variable into account when exploring the differences by locality.\nFor the sake of concision and to ensure that the table is not too difficult to read, we need to select the variables we want to study. Therefore, we have decided not to include the sex variable: while we observed some differences by sex, the main driver of school attendance observed in the first table was age. Further analyses could later explore the specificity of school attendance by type of locality and sex. In this same vein, we run analyses only on individuals above 14, as we saw in the previous table that school attendance does not vary for younger respondents: in that case, it is best to keep only the important information so as not to overwhelm the reader with too much detail!\n\n# First, recode the sector (residence) variable\n\n  edu$sector_rec &lt;- edu$sector  |&gt;\n  as.character() |&gt;\n  fct_recode(\n    \"Urban\" = \"1\",\n    \"Rural\" = \"2\",\n    \"Estate\" = \"3\"\n  )\n\n\n# Second, we keep only individuals in our database aged at least 14--------------------------\nedu14&lt;- edu |&gt; \n  filter(age&gt;=14)\n\n# Third, frequency table of school attendance by age and locality--------------------------\nm&lt;-edu14 |&gt; freqtable(age,r2_school_education_rec,sector_rec,weights=finalweight_25per) |&gt;\n  lprop() \nkbl_grouped_3way(m,digits=0)|&gt;\n  kable_classic_2(full_width = FALSE)\n\n\n\n\nage\nCurrently attending\nNever attended\nAttended school in the past\nTotal\n\n\n\n\nUrban\n\n\n14\n97\n0\n3\n100\n\n\n15\n98\n0\n2\n100\n\n\n16\n74\n0\n26\n100\n\n\n17\n77\n0\n23\n100\n\n\n18\n64\n3\n33\n100\n\n\n19\n30\n0\n70\n100\n\n\nAll\n72\n0\n28\n100\n\n\nRural\n\n\n14\n99\n0\n1\n100\n\n\n15\n98\n0\n2\n100\n\n\n16\n82\n0\n18\n100\n\n\n17\n70\n2\n29\n100\n\n\n18\n65\n1\n34\n100\n\n\n19\n29\n1\n70\n100\n\n\nAll\n74\n1\n26\n100\n\n\nEstate\n\n\n14\n100\n0\n0\n100\n\n\n15\n100\n0\n0\n100\n\n\n16\n79\n0\n21\n100\n\n\n17\n58\n0\n42\n100\n\n\n18\n57\n0\n43\n100\n\n\n19\n36\n0\n64\n100\n\n\nAll\n76\n0\n24\n100\n\n\n\n\n\n\n\nInterestingly, there do not appear to be strong differences in school attendance status across residential locality types. If anything, urban children seem slightly more likely to be out of school than rural or estate children. This pattern is somewhat surprising, as we might have expected rural children to be more prone to dropping out due to more limited access to schools at higher grade levels.",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>A short example with HIES 2019</span>"
    ]
  },
  {
    "objectID": "tutorial.html#school-non-attendance-and-family-background",
    "href": "tutorial.html#school-non-attendance-and-family-background",
    "title": "4  A short example with HIES 2019",
    "section": "4.4 School non-attendance and family background",
    "text": "4.4 School non-attendance and family background\nSchool attendance is likely to be associated with family’s social background for at least two reasons.\n\nFirst, cultural capital may play a role: parents with higher levels of education are often better equipped to support and value continued schooling.\nSecond, economic factors matter: for families with fewer resources, the opportunity cost of keeping a child in school—rather than contributing to household income or domestic work—may be higher.\n\nDo these hypotheses ring a bell with specific sociological theories? Say, maybe Bourdieu’s theory of cultural reproduction or Boudon’s theory of opportunity (secondary effects)?\nWe can have a look whether parental education and household wealth matter.\nFor parental education, notice that for about 16 percent of children parental education is unknown (in fact, these children are not the children of the household head so in the survey we could not match them to any parent).\nLet’s examine how parental education affects school drop out at each age:\n\nm&lt;-edu14 |&gt; freqtable(edu_parent,r2_school_education_rec,age,weights=finalweight_25per) |&gt;\n  lprop() \nkbl_grouped_3way(m,digits=0)|&gt;\n  kable_classic_2(full_width = FALSE)\n\n\n\n\nedu_parent\nCurrently attending\nNever attended\nAttended school in the past\nTotal\n\n\n\n\n14\n\n\nLess than primary\n91\n0\n9\n100\n\n\nPrimary\n99\n1\n0\n100\n\n\nJunior secondary\n99\n0\n1\n100\n\n\nSenior secondary\n100\n0\n0\n100\n\n\nCollegiate\n100\n0\n0\n100\n\n\nTertiary\n100\n0\n0\n100\n\n\nNA\n95\n0\n5\n100\n\n\nAll\n98\n0\n2\n100\n\n\n15\n\n\nLess than primary\n82\n0\n18\n100\n\n\nPrimary\n96\n0\n4\n100\n\n\nJunior secondary\n99\n0\n1\n100\n\n\nSenior secondary\n100\n0\n0\n100\n\n\nCollegiate\n100\n0\n0\n100\n\n\nTertiary\n100\n0\n0\n100\n\n\nNA\n98\n0\n2\n100\n\n\nAll\n98\n0\n2\n100\n\n\n16\n\n\nLess than primary\n66\n0\n34\n100\n\n\nPrimary\n77\n0\n23\n100\n\n\nJunior secondary\n83\n0\n17\n100\n\n\nSenior secondary\n89\n0\n11\n100\n\n\nCollegiate\n70\n3\n28\n100\n\n\nTertiary\n95\n0\n5\n100\n\n\nNA\n79\n0\n21\n100\n\n\nAll\n80\n0\n19\n100\n\n\n17\n\n\nLess than primary\n52\n8\n40\n100\n\n\nPrimary\n64\n3\n33\n100\n\n\nJunior secondary\n66\n1\n33\n100\n\n\nSenior secondary\n88\n1\n11\n100\n\n\nCollegiate\n88\n0\n12\n100\n\n\nTertiary\n100\n0\n0\n100\n\n\nNA\n45\n0\n55\n100\n\n\nAll\n71\n1\n28\n100\n\n\n18\n\n\nLess than primary\n17\n0\n83\n100\n\n\nPrimary\n40\n0\n60\n100\n\n\nJunior secondary\n59\n1\n41\n100\n\n\nSenior secondary\n93\n0\n7\n100\n\n\nCollegiate\n88\n3\n9\n100\n\n\nTertiary\n100\n0\n0\n100\n\n\nNA\n58\n3\n39\n100\n\n\nAll\n64\n1\n34\n100\n\n\n19\n\n\nLess than primary\n10\n0\n90\n100\n\n\nPrimary\n25\n0\n75\n100\n\n\nJunior secondary\n24\n1\n75\n100\n\n\nSenior secondary\n31\n0\n69\n100\n\n\nCollegiate\n41\n1\n58\n100\n\n\nTertiary\n60\n0\n40\n100\n\n\nNA\n27\n0\n73\n100\n\n\nAll\n29\n1\n70\n100\n\n\n\n\n\n\n\n\nBelow age 16, the share of children not attending school is much higher among those whose parents have less than a primary education; for children of more educated parents, non-attendance is virtually nonexistent.\nFrom age 16 onward, the overall pattern follows a clear gradient: children with lower-educated parents are more likely to leave school, while those with highly educated parents are more likely to remain enrolled.\nIt is also noteworthy that children whose parents’ education is unknown show above-average levels of non-attendance. This group may have a distinct background—for instance, some may not be the household head’s own children and might be growing up in large joint families or without their parents.\n\n\nm&lt;-edu14 |&gt; freqtable(hhwealthcat,r2_school_education_rec,age,weights=finalweight_25per) |&gt;\n  lprop() \nkbl_grouped_3way(m,digits=0)|&gt;\n  kable_classic_2(full_width = FALSE)\n\n\n\n\nhhwealthcat\nCurrently attending\nNever attended\nAttended school in the past\nTotal\n\n\n\n\n14\n\n\nPoorest\n95\n1\n4\n100\n\n\nPoor\n100\n0\n0\n100\n\n\nMiddle\n95\n0\n5\n100\n\n\nRich\n100\n0\n0\n100\n\n\nRichest\n100\n0\n0\n100\n\n\nAll\n98\n0\n2\n100\n\n\n15\n\n\nPoorest\n96\n0\n4\n100\n\n\nPoor\n100\n0\n0\n100\n\n\nMiddle\n93\n0\n7\n100\n\n\nRich\n100\n0\n0\n100\n\n\nRichest\n100\n0\n0\n100\n\n\nAll\n98\n0\n2\n100\n\n\n16\n\n\nPoorest\n80\n0\n20\n100\n\n\nPoor\n84\n0\n16\n100\n\n\nMiddle\n75\n1\n23\n100\n\n\nRich\n86\n0\n14\n100\n\n\nRichest\n77\n0\n23\n100\n\n\nAll\n80\n0\n19\n100\n\n\n17\n\n\nPoorest\n50\n6\n44\n100\n\n\nPoor\n64\n1\n35\n100\n\n\nMiddle\n71\n0\n29\n100\n\n\nRich\n81\n1\n19\n100\n\n\nRichest\n83\n0\n17\n100\n\n\nAll\n71\n1\n28\n100\n\n\n18\n\n\nPoorest\n47\n0\n53\n100\n\n\nPoor\n63\n2\n35\n100\n\n\nMiddle\n61\n1\n38\n100\n\n\nRich\n72\n2\n27\n100\n\n\nRichest\n80\n0\n20\n100\n\n\nAll\n64\n1\n34\n100\n\n\n19\n\n\nPoorest\n30\n0\n70\n100\n\n\nPoor\n25\n1\n74\n100\n\n\nMiddle\n26\n0\n74\n100\n\n\nRich\n27\n1\n71\n100\n\n\nRichest\n39\n0\n61\n100\n\n\nAll\n29\n1\n70\n100\n\n\n\n\n\n\n\nWealth differences become more pronounced in late adolescence:\n\nAt ages 14–15, past attendance remains very low across all categories, indicating that early dropout is rare regardless of household wealth.\nFrom age 16 onward, however, the proportion of children who have left school rises steadily, especially among poorer households.\nBy ages 17–18, children in the poorest group show the highest levels of past attendance (44–53%), while those in the richest households are much less likely to have exited school.\nAt age 19, past attendance becomes the majority status for all groups, though it remains somewhat lower among the richest, highlighting that wealth increasingly shapes school persistence as children grow older.",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>A short example with HIES 2019</span>"
    ]
  },
  {
    "objectID": "tutorial.html#reasons-for-dropping-out",
    "href": "tutorial.html#reasons-for-dropping-out",
    "title": "4  A short example with HIES 2019",
    "section": "4.5 Reasons for dropping out",
    "text": "4.5 Reasons for dropping out\nWe can dig in a bit deeper on the students who attended school in the past by checking the reasons for leaving school. Again, we need to recode the categories of this variable called r2_school_education.\n\nedu14notcurrently&lt;-edu14 |&gt; filter(r2_school_education_rec==\"Attended school in the past\")\nedu14notcurrently$reason_leave_school_rec &lt;- edu14notcurrently$reason_leave_school  |&gt;\n  as.character() |&gt;\n  fct_recode(\n    \"Further schooling not available or too far away\" = \"1\",\n    \"Financial problems\" = \"2\",\n    \"House keeping / Family business\" = \"3\",\n    \"Disability\" = \"4\",\n    \"Illness\" = \"5\",\n    \"Not willing / poor academic progress\" = \"6\",\n    \"Pending results (GCE)\" = \"7\",\n    \"Complete GCE / Grade 13\" = \"8\",\n    \"Engaged in an economic activity\" = \"9\",\n    \"Other\" = \"99\"\n  )\n\nedu14notcurrently |&gt; freqtable(reason_leave_school_rec,weights=finalweight_25per) |&gt;\n  freq() |&gt; select(-n) |&gt;\n  kbl(digits=0) |&gt; kable_classic(full_width = F)\n\n\n\n\n\n%\nval%\n\n\n\n\nFurther schooling not available or too far away\n1\n1\n\n\nFinancial problems\n7\n7\n\n\nHouse keeping / Family business\n4\n4\n\n\nDisability\n1\n1\n\n\nIllness\n1\n1\n\n\nNot willing / poor academic progress\n37\n37\n\n\nPending results (GCE)\n14\n14\n\n\nComplete GCE / Grade 13\n14\n14\n\n\nEngaged in an economic activity\n13\n13\n\n\nOther\n7\n7\n\n\n\n\n\n\n\nThis variable is rather subjective, and its categories may overlap with one another. Ideally, we would also have preferred to rely on more objective indicators of school achievement. Despite the presence of ten distinct response options, the reasons for leaving school can be grouped into a few broader blocks.\n\nOpportunity-cost reasons include financial problems (7%), household or family business responsibilities (4%), and engagement in economic activity (13%).\nAcademic-related reasons are dominated by ‘not willing / poor academic progress,’ which is by far the most frequently cited reason (37%).\nA small share relates to institutional or availability issues, such as further schooling being unavailable or too far away (1%, very low!) or pending GCE results (14%) to continue further.\nPersonal health issues, including disability (1%) and illness (1%) account for a small share of the cited reasons.\nThe Other category represents 7% of the children not attending school, and unfortunately we cannot do anything about it.\nHaving completed GCE / grade 13 is important to keep in mind here: these children already have completed secondary and this section of the survey does not keep track whether children are engaging into tertiary education so they should be left out in further analyses.\n\nLet us recode the reasons for leaving school into these broader categories (noting that this recoding may be open to criticism or revision) and filter out the children having completed secondary school in order to streamline the analysis.\n\nedu14nocurnocomp &lt;-edu14notcurrently |&gt; filter(reason_leave_school_rec!=\"Complete GCE / Grade 13\")\n  \nedu14nocurnocomp$reason_leave_streamlined &lt;- edu14nocurnocomp$reason_leave_school_rec  |&gt;\nfct_recode(\n  \"Institutional / Availability\" = \"Further schooling not available or too far away\",\n  \"Opportunity-cost\" = \"Financial problems\",\n  \"Opportunity-cost\" = \"House keeping / Family business\",\n  \"Personal health issues\" = \"Disability\",\n  \"Personal health issues\" = \"Illness\",\n  \"Academic achievement-related\" = \"Not willing / poor academic progress\",\n  \"Institutional / Availability\" = \"Pending results (GCE)\",\n  \"Opportunity-cost\" = \"Engaged in an economic activity\"\n)\n#Remove unused levels (Complete GCE / Grade 13)\nedu14nocurnocomp$reason_leave_streamlined &lt;- droplevels(edu14nocurnocomp$reason_leave_streamlined)\n\nedu14nocurnocomp |&gt; freqtable(reason_leave_streamlined,weights=finalweight_25per) |&gt;\n  freq() |&gt; select(-n) |&gt;\n  kbl(digits=0) |&gt; kable_classic(full_width = F)\n\n\n\n\n\n%\nval%\n\n\n\n\nInstitutional / Availability\n18\n18\n\n\nOpportunity-cost\n29\n29\n\n\nPersonal health issues\n2\n2\n\n\nAcademic achievement-related\n44\n44\n\n\nOther\n8\n8\n\n\n\n\n\n\n\nWith this streamlined variable, we then investigate how they vary according to parent education and household wealth:\n\nedu14nocurnocomp |&gt; freqtable(edu_parent,reason_leave_streamlined,weights=finalweight_25per) |&gt;\n  rprop() |&gt; \n  kbl(digits=0) |&gt; kable_classic(full_width = F)\n\n\n\n\n\nInstitutional / Availability\nOpportunity-cost\nPersonal health issues\nAcademic achievement-related\nOther\nTotal\n\n\n\n\nLess than primary\n9\n37\n0\n54\n0\n100\n\n\nPrimary\n13\n26\n1\n51\n9\n100\n\n\nJunior secondary\n13\n33\n2\n47\n5\n100\n\n\nSenior secondary\n39\n34\n3\n20\n4\n100\n\n\nCollegiate\n35\n15\n3\n24\n24\n100\n\n\nTertiary\n0\n0\n0\n0\n100\n100\n\n\nNA\n16\n24\n3\n46\n11\n100\n\n\nAll\n18\n29\n2\n44\n8\n100\n\n\n\n\n\n\n\n\nedu14nocurnocomp |&gt; freqtable(hhwealthcat,reason_leave_streamlined,weights=finalweight_25per) |&gt;\n  rprop() |&gt; \n  kbl(digits=0) |&gt; kable_classic(full_width = F)\n\n\n\n\n\nInstitutional / Availability\nOpportunity-cost\nPersonal health issues\nAcademic achievement-related\nOther\nTotal\n\n\n\n\nPoorest\n11\n39\n1\n47\n2\n100\n\n\nPoor\n13\n28\n2\n50\n8\n100\n\n\nMiddle\n18\n26\n2\n44\n10\n100\n\n\nRich\n20\n20\n2\n45\n14\n100\n\n\nRichest\n33\n30\n2\n26\n9\n100\n\n\nAll\n18\n29\n2\n44\n8\n100\n\n\n\n\n\n\n\nTaken together, the two tables show that both parental education and household wealth shape the reasons why children leave school, but in somewhat different ways.\n\nAmong children from less educated or poorer households, school exit is most often linked to academic-achievement–related issues and opportunity-cost pressures, suggesting that learning difficulties and the need to contribute economically remain key constraints. As parental education and wealth increase, however, academic and economic pressures diminish.\n\nE.g., more than half (54%) of the children with less than primary educated parents cite academic-achievement-related issues (while only 24% of children with tertiary-educated parents cite this issue)\nE.g., about 40% of poorest children cite opportunity-cost pressures, but only 30% of the richest children.\n\nAs parental education and wealth increase, institutional or availability factors—such as limited options for further schooling—become more prominent. At the top of the socioeconomic spectrum, these structural constraints partly replace academic or financial motivations as the main reasons for leaving school.\n\nE.g., 33% of the richest children cite this reason but only 11% of poorest children do.\n\n\nNotice that having filtered out children who had completed GCE/Grade 13 (i.e. those who have completed secondary school) means that none of the children with tertiary-educated parents are out of school, reinforcing the association between parents’ education and children’s dropouts.",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>A short example with HIES 2019</span>"
    ]
  },
  {
    "objectID": "tutorial.html#limits-and-possible-ways-to-solve-them",
    "href": "tutorial.html#limits-and-possible-ways-to-solve-them",
    "title": "4  A short example with HIES 2019",
    "section": "4.6 Limits (and possible ways to solve them)",
    "text": "4.6 Limits (and possible ways to solve them)\nOur analysis has some limitations (or observations to bear in mind).\n\nWe adopted an age-cohort approach, implicitly assuming that children of different ages (e.g., 14 vs. 15) can be compared directly. This could imply, for example, that children who dropped out at age 15 are assumed to have done so in that year. But it would not be accurate to think that way—children aged 17, for instance, may have left school several years earlier. This issue could be explored further using the variable when_stop_schooling, which indicates the year in which each child dropped out.\nWe also did not consider another issue beyond dropping out: class/grade for age. Even if children are attending school, they may be late for their age, because they have started school later than their peers or because they repeated a class. The variables grade_this_year and grade_last_year may be of interest to examine this.",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>A short example with HIES 2019</span>"
    ]
  },
  {
    "objectID": "tutorial.html#possible-qualitative-extensions",
    "href": "tutorial.html#possible-qualitative-extensions",
    "title": "4  A short example with HIES 2019",
    "section": "4.7 Possible qualitative extensions",
    "text": "4.7 Possible qualitative extensions\nQualitative field material could enrich our understanding of school attendance and dropout. For example, interviews with students, parents, and teachers could provide insights into:\n\nThe reasons why children leave school that are not captured by survey categories (and whether they sometimes overlap);\nHow parents’ expectations shape educational decisions (to drop out);\nHow parents and children perceive the value of education (and whether it is worth going to school if it is not compulsory);\nLocalized barriers to school attendance (even if rural does not seem associated to more drop outs, are there some specific areas where school density is less present at higher grades?).",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>A short example with HIES 2019</span>"
    ]
  },
  {
    "objectID": "tutorial.html#preliminary-conclusion",
    "href": "tutorial.html#preliminary-conclusion",
    "title": "4  A short example with HIES 2019",
    "section": "4.8 Preliminary conclusion",
    "text": "4.8 Preliminary conclusion\nOverall, school attendance in Sri Lanka is high at younger ages but declines steadily from age 16, with dropouts more common among children from poorer households or with less-educated parents. Academic challenges and opportunity costs are the main reasons for leaving school among disadvantaged children, while institutional constraints become more important for children from wealthier or more educated families.\nFor a report:\n\nThis analysis should be extended with further academic literature on education school drop out, for instance, in Sri Lanka, see Lindberg, 2010 or Arunatilake, 2006 (they are now a bit old and you should also search for more recent articles).\nWe have not included graphics here, but they are always a useful way to convey information to an audience. You can use esquisse, as introduced in previous chapters, or export the tables you want to visualize into your preferred spreadsheet software to create graphics when finalizing your analysis.\nIn a final report, all the tables and graphs must have a title, as well as some explanations of the data used (HIES 2019 here) and the restrictions applied to the analytical sample (for example for the latter tables, individuals aged between 14 and 19, etc.).",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>A short example with HIES 2019</span>"
    ]
  },
  {
    "objectID": "topics.html",
    "href": "topics.html",
    "title": "5  Topics under scrutiny",
    "section": "",
    "text": "5.1 Introduction\nThis section presents the main topics studied with the HIES 2019 for the SoMix project.\nOur overarching research theme is:\nWho Benefits from Public Goods? Socio-spatial Inequalities in the Access and Use of Health and Education Services in Sri Lanka\nFor the quantitative part of the project, we have already identified a number of topics that will drive our research project.",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Topics under scrutiny</span>"
    ]
  },
  {
    "objectID": "topics.html#general-instructions",
    "href": "topics.html#general-instructions",
    "title": "5  Topics under scrutiny",
    "section": "5.2 General instructions",
    "text": "5.2 General instructions\n\nAssemble in groups of 4-5 students. You do not need to choose a group based on the university you come from.\nChoose one topic per group from the table below. Each group needs to have its own topic, two groups cannot work on the same topic.\nCarefully read the information provided in this table regarding your chosen topic.\nStart laying out an analytical plan for your study. This includes:\n\nWhat is your dependent variable? (or your dependent variables if you think your topic covers multiple objects of investigation). You will need to refer to the HIES questionnaire section(s) covering your topic and select the relevant question, then identify the corresponding variables in the database.\nWhat are the main independent variables you want to study? Generally, these are socio-demographic variables. These variables should be of analytical interest, i.e. you should either have a sociological reasoning to include them (you know of some theory, previous literature, etc… suggesting that this variable may be linked to the dependent variable that you want to study), or you make the assumption that the variable is so central in shaping the Sri Lankan social landscape that it just cannot be left out. You can refer to the Introduction section to recall the main constructed socio-spatial variables in the data.\nTry shaping your thinking in terms of hypotheses.\nFor this step, write a few sentences to justify your choices (this may include relevant literature).\n\nPreparation of the statistical analysis\n\nUnivariate statistics: for all variables that you have listed above, run univariate statistics on your database. Be careful if these are numerical or categorical variables! Do not forget unweighted frequencies, missing observations, …\nSave the tables/graphics in a relevant document.\nIf some variables require recoding tasks, justify and run them.\n\nStatistical analysis\n\nConduct bivariate or multivariate statistics. This may include mean/standard deviation by a categorical variable, cross tabulations, graphics…\nSave your code and your analysis!\n\nAfter carefully discussing among yourself and with your tutors about the most interesting outputs of these analyses, write analytical sentences describing your analyses.\nIn a further step, you will need to enhance these analyses in different ways in terms of sociological interpretation:\n\nHow do these results contradict or support your reasoning before conducting these statistical analysis?\nWhat is new in your results that you did not know before, confirms or contradicts the sociological literature, etc?\nWhat could possibly be done in terms of qualitative study to push further these analyses?",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Topics under scrutiny</span>"
    ]
  },
  {
    "objectID": "topics.html#a-quick-presentation-of-each-suggested-topic",
    "href": "topics.html#a-quick-presentation-of-each-suggested-topic",
    "title": "5  Topics under scrutiny",
    "section": "5.3 A quick presentation of each suggested topic",
    "text": "5.3 A quick presentation of each suggested topic\nBelow is a suggested list of topics. You may want to add other topics if you wish! In that case however, please let us know so we can approve your topic proposal.\n\nTopics to study in the SoMix project\n\n\n\n\n\n\n\n\n\nTopic\nBrief presentation\nWinter workshop database to work with\nSection of the HIES questionnaire\nPages of the official report with relevant analyses\n\n\n\n\nSchool attendance and dropout\nThis topic has already been explored in the previous section as an example. It aims at uncovering the socio-spatial determinants of school non-attendance by age.\nedu.rds\nSection 2\nNone\n\n\nUniversity attainment\nAmong adult respondents, who attained university education and how does it vary by age, sex and locality?\ndemo.rds\nSection 2\nNone\n\n\nGovernment versus private school attendance\nAmong school-attending children, what are the social determinants that drive family choice for government versus private school? Are they different according to urban/rural locality and province of residence?\nedu.rds\nSection 2\nNone\n\n\nDistance and mode of travel to school\nHow is access to school, in terms of spatial distance and mode of travel, constrained by locality characteristics and social determinants?\nedu.rds\nSection 2\nSee p.121-122-123\n\n\nChronic illness\nWho suffers from chronic illness? Age will be an important demographic variable to examine here.\nhealth.rds\nSection 3A\nSee from p. 92 onwards\n\n\nUse of health facility as an outpatient\nHow does the use of private versus government health facilities as an outpatient vary by locality and social characteristics?\nhealth.rds\nSection 3A\nSee from p. 92 onwards\n\n\nUse of health facility as an inpatient\nHow does the use of private versus government health facilities as an inpatient vary by locality and social characteristics?\nhealth.rds\nSection 3A\nSee from p. 92 onwards\n\n\nAccess to primary facilities\nHow is the access to basic facilities shaped by locality of residence?\nenvironment.rds\nSection 7\nNone\n\n\nWater services\nHow is the access to drinking water shaped by socio-spatial determinants?\nenvironment.rds\nSection 8\nNone\n\n\nSanitation and toilet availability\nDo all households get access to toilets in their premises?\nenvironment.rds\nSection 8\nNone\n\n\nEnergy & electricity\nDo all households get access electricity supply and what king of energy source is used for cooking?\nenvironment.rds\nSection 7 & 8\nNone\n\n\nGarbage\nWhat kind of garbage facility is there for households depending on their location?\nenvironment.rds\nSection 7 & 8\nNone\n\n\n… Feel free to suggest other topics (and check it with us!)",
    "crumbs": [
      "**Topics of interest**",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Topics under scrutiny</span>"
    ]
  },
  {
    "objectID": "syntaxe.html",
    "href": "syntaxe.html",
    "title": "6  Code organization",
    "section": "",
    "text": "6.1 What is a “project” in RStudio?\nThroughout this tutorial, we have created various R scripts that have been collected in a folder called “R Training.” When you code in R, a good practice is to create a “project” that points to the folder containing scripts that are related to each other (a research project, for example), the relevant data, etc.\nThis project folder can be created by clicking on “Project: (None)” in the top right corner, then on “New Project”, and finally “Existing Directory” (select the Training R folder).\nThis folder can contain several files:\nThe advantage of working on a “project” in RStudio is that Rstudio will then automatically point to the root folder (R Training) when the project is opened, making it easier to access files in Files and by writing the path in scripts.",
    "crumbs": [
      "**To move further**",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Code organization</span>"
    ]
  },
  {
    "objectID": "syntaxe.html#what-is-a-project-in-rstudio",
    "href": "syntaxe.html#what-is-a-project-in-rstudio",
    "title": "6  Code organization",
    "section": "",
    "text": "Script\nData\nOutput (this is where you may want to gather the beautiful graphs and tables you have created throughout your code)",
    "crumbs": [
      "**To move further**",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Code organization</span>"
    ]
  },
  {
    "objectID": "syntaxe.html#organizing-your-code-and-files",
    "href": "syntaxe.html#organizing-your-code-and-files",
    "title": "6  Code organization",
    "section": "6.2 Organizing your code and files",
    "text": "6.2 Organizing your code and files\nIt’s quite common to start a project and come back to it months or even years later (welcome to the wonderful world of academia!).\nWhat should you do when you’ve forgotten everything?\nIf you’ve structured your code well, you can add sections to your script to make it easier to find your way around:\n\n# Here you create a section in the comment ------------------------------\n\nA good practice is to extensively comment your code and the your various operations you are doing in it. It will be very useful to help you find your way around and understand your code when you come back to it after some time - when you have completely forgotten what you were doing!:\n\n#The hash symbol allows you to start a comment.\n# When you need to write a long comment,\n# you can write without the hash symbol, then highlight everything,\n# and press Cmd (or Ctrl)+Shift+C, and the block will be turned into\n# a comment!\n\nIt is also quite common to create different scripts for different types of operations (but this depends on your habits), for example:\n\nA script (or several scripts) where you perform all the recoding necessary for analysis and save your database with the new variables (in R format, rds rather).\nA script (or several scripts) where you perform all the analysis operations.\n\nAnother good practice that we strongly recommend you to do is to keep track of your the progress of your work by saving a new file - with the date indicated in the title - each new day you are working on a script. For example, the recoding file could be named “20250602Recodages.R” (the date is in YYYYMMDD format to ensure that the files are displayed from oldest to newest in the folder where they are stored).",
    "crumbs": [
      "**To move further**",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Code organization</span>"
    ]
  },
  {
    "objectID": "syntaxe.html#get-help",
    "href": "syntaxe.html#get-help",
    "title": "6  Code organization",
    "section": "6.3 Get help",
    "text": "6.3 Get help\nHere are a few ways to get help when the script crashes:\n\nThe first reflex is to look up how to use a function in R:\n\n\n?mean #The question mark opens the function description page.\n\n\nYou can also type your problem directly on internet (for example on Google, etc.). This will often get you to the Stackoverflow forum (among others) where the problem you are facing has been discussed (usually in English).\nYou can also look into various R training guides (for example, the one mentioned in the preface section of this tutorial).\n…",
    "crumbs": [
      "**To move further**",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Code organization</span>"
    ]
  }
]